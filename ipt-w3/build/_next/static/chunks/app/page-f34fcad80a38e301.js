(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{377:function(e,t,a){Promise.resolve().then(a.bind(a,4036))},4036:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return I}});var n=a(7437),s=a(3574),r=a.n(s),i=a(3062),o=a(4332),l=a(2265),d=a(6737);let c=new d.ZPm("wss://eth-mainnet.g.alchemy.com/v2/5zq4W6KtB5W3j8kmGC1NGbawDglgoiTU"),p=new c.eth.Contract([{inputs:[{internalType:"uint256",name:"cap",type:"uint256"},{internalType:"uint256",name:"mintAtLaunch",type:"uint256"},{internalType:"uint256",name:"reward",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"uint256",name:"increasedSupply",type:"uint256"},{internalType:"uint256",name:"cap",type:"uint256"}],name:"ERC20ExceededCap",type:"error"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"allowance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientAllowance",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC20InvalidApprover",type:"error"},{inputs:[{internalType:"uint256",name:"cap",type:"uint256"}],name:"ERC20InvalidCap",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC20InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC20InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"spender",type:"address"}],name:"ERC20InvalidSpender",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"blockReward",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"value",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"burnFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"cap",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contractAddress",type:"address"}],name:"readApprovalFor",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"approvedAddress",type:"address"}],name:"revokeApproval",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalMined",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],"0xAb6bEda66d62e3fB053767646acb2B3f384dCdC0"),u=new c.eth.Contract([{inputs:[{internalType:"address",name:"tokenAddress",type:"address"}],stateMutability:"payable",type:"constructor"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"string",name:"sha512",type:"string"}],name:"IPRegistered",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"from",type:"address"},{indexed:!1,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"string",name:"sha512",type:"string"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"IPTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"ipowner",type:"address"},{indexed:!1,internalType:"string",name:"sha512",type:"string"}],name:"IpDeleted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"OwnerIPTWithdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"seller",type:"address"},{indexed:!1,internalType:"string",name:"sha512",type:"string"}],name:"SalesIntentCancelled",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"seller",type:"address"},{indexed:!1,internalType:"string",name:"sha512",type:"string"}],name:"SalesIntentCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"requester",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"TokensRequested",type:"event"},{stateMutability:"payable",type:"fallback"},{inputs:[{internalType:"string",name:"str",type:"string"},{internalType:"uint192",name:"salesPrice",type:"uint192"}],name:"buyerBuysIP",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"deleteIP",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"freeIpTokenwithdrawal",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"getIP",outputs:[{components:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint96",name:"creationTimeStamp",type:"uint96"},{internalType:"bool",name:"exists",type:"bool"}],internalType:"struct IPtrade.IPowner",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"getSalesIntent",outputs:[{components:[{internalType:"address",name:"buyer_address",type:"address"},{internalType:"uint192",name:"salesPrice",type:"uint192"},{internalType:"uint64",name:"creationTimeStamp",type:"uint64"},{internalType:"bool",name:"exists",type:"bool"}],internalType:"struct IPtrade.Onsale",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"lockTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"registerIPCostIpt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"requestTokens",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"sellerCancelsSalesIntent",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"str",type:"string"},{internalType:"uint192",name:"salesPrice",type:"uint192"},{internalType:"address",name:"buyerAddress",type:"address"}],name:"sellerCreatesSalesIntent",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"}],name:"setFreeIpTokenwithdrawal",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"setIP",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_register",type:"uint256"},{internalType:"uint256",name:"_transfer",type:"uint256"}],name:"setIPCostIpt",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"}],name:"setLockTime",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address payable",name:"_new_owner",type:"address"}],name:"setNewOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"transferIPCostIpt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"unregisteredIPT",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],"0x9BadAa81fF2748b44A272D5957CD631E0B4021aA");var h={IPTContract:p,IPtrade:u};a(8646);var m=a(1455),y=a.n(m),g=a(7948);a(3343);var f=a(6691),x=a.n(f);let v=h.IPTContract,b=h.IPTContract._address;console.log("add",v);let w=h.IPtrade,j=w.options.address,T="https://etherscan.io/address/".concat(j);var I=()=>{let[e,t]=(0,l.useState)("approve"),[a,s]=(0,l.useState)(""),[c,p]=(0,l.useState)(""),[u,h]=(0,l.useState)(""),[m,f]=(0,l.useState)(j),[I,N]=(0,l.useState)(""),[P,k]=(0,l.useState)(""),[C,A]=(0,l.useState)(!0),[_,E]=(0,l.useState)(null),[B,S]=(0,l.useState)([]),[M,F]=(0,l.useState)(""),[q,R]=(0,l.useState)(""),[L,D]=(0,l.useState)(""),[O,H]=(0,l.useState)(""),[Y,W]=(0,l.useState)(""),[z,G]=(0,l.useState)(""),[U,K]=(0,l.useState)(""),[V,J]=(0,l.useState)(""),[Q,X]=(0,l.useState)(""),[Z,$]=(0,l.useState)(""),[ee,et]=(0,l.useState)(""),[ea,en]=(0,l.useState)(""),[es,er]=(0,l.useState)(""),[ei,eo]=(0,l.useState)(""),[el,ed]=(0,l.useState)(null),ec=async()=>{if(console.log("connect wallet"),void 0!==window.ethereum){var e;let t=window.ethereum;(null===(e=window.ethereum.providers)||void 0===e?void 0:e.length)&&window.ethereum.providers.forEach(async e=>{e.isMetaMask&&(t=e)}),S(await t.request({method:"eth_requestAccounts",params:[]})),E(new d.BvB(window.ethereum)),A(!1),console.log("MetaMask is installed!")}else{console.log("Please install Metamask"),eC("Please install Metamask");return}},ep=(e,t,a)=>{e&&e.message&&(e=e.message);let n=e.toString(),s=n.match(/value "([^"]+)" at "\/0" must pass "address" validation/),r=n.match(/value "([^"]+)" at "\/1" must pass "uint256" validation/),i=n.match(/denied/);console.log(n),i?console.log("Match found:",i[0]):console.log("No match found"),s&&s[0]?(console.error("Caught specific error:",s[0]),eC(t)):r&&r[0]?(console.error("Caught specific error:",r[0]),eC(a)):i&&i[0]?(console.error("Caught specific error:",i[0]),eC("User denied transaction")):(console.error("Caught an error:",n),eC(n))},eu=async()=>{try{await window.ethereum.request({method:"eth_sendTransaction",params:[{from:B[0],to:v.options.address,data:v.methods.approve(m,1e18*I).encodeABI()}]}),console.log("Approval successful")}catch(e){ep(e,"Please type a valid address","Please type a whole number as amount")}},eh=async()=>{console.log("Pressed to read approval");try{let e=await window.ethereum.request({method:"eth_call",params:[{from:B[0],to:v.options.address,data:v.methods.readApprovalFor(m).encodeABI()},"latest"]});if("0x"===e)console.log("Approval:",e),k(0);else{let t=_.utils.hexToNumber(e);console.log("Approval:",t),k(t)}}catch(e){ep(e,"Please type a valid address","")}},em=async()=>{console.log("Pressed to revoke approval");try{await window.ethereum.request({method:"eth_sendTransaction",params:[{from:B[0],to:v.options.address,data:v.methods.revokeApproval(m).encodeABI()},"latest"]}),console.log("revoked approval for:",m)}catch(e){ep(e,"Please type a valid address","")}},ey=(0,l.useCallback)(async()=>{try{let e=await window.ethereum.request({method:"eth_call",params:[{from:B[0],to:w.options.address,data:w.methods.freeIpTokenwithdrawal().encodeABI()},"latest"]});s(e);let t=await window.ethereum.request({method:"eth_call",params:[{from:B[0],to:w.options.address,data:w.methods.registerIPCostIpt().encodeABI()},"latest"]});p(t);let a=await window.ethereum.request({method:"eth_call",params:[{from:B[0],to:w.options.address,data:w.methods.transferIPCostIpt().encodeABI()},"latest"]});h(a);let n=await window.ethereum.request({method:"eth_call",params:[{from:B[0],to:w.options.address,data:w.methods.lockTime().encodeABI()},"latest"]});et(n)}catch(e){eC("Failed to load faucet info")}},[B]),eg=async()=>{console.log("get free IPT");let e=await ex();if(console.log("timePassedCheck",e),!e){eC("Not enough time since last transfer");return}try{let e=await window.ethereum.request({method:"eth_sendTransaction",params:[{from:B[0],to:w.options.address,data:w.methods.requestTokens().encodeABI()},"latest"]});console.log("receipt:",e),eA("IPT collection successful!")}catch(e){console.error("getting IPT failed:",e),eC(e.data.message)}},ef=async()=>{try{$("No previous owners");let e=await _.eth.getPastLogs({fromBlock:0,toBlock:"latest",address:"0x9BadAa81fF2748b44A272D5957CD631E0B4021aA",topics:["0xca00f8032cdcf162c969609d82f6c8d2f473b3321c01f6323283abfa6abbdfbc"]});console.log("IPTransferredEvents",e);let t=[];e.forEach(e=>{console.log("event",e);try{let a=_.eth.abi.decodeLog([{type:"address",name:"from",indexed:!1},{type:"address",name:"to",indexed:!1},{type:"string",name:"sha512",indexed:!1},{type:"uint256",name:"amount",indexed:!1}],e.data);a.blockNumber=e.blockNumber,a.transactionHash=e.transactionHash,console.log(a.amount),t.push(a)}catch(e){console.error("Error decoding log:",e)}}),(async function(e,t){let a=await Promise.all(e.map(async e=>{if(e.sha512===t){let t=await _.eth.getBlock(e.blockNumber),a=new Date(parseInt(1e3*Number(t.timestamp))).toString();return[e.from,a,e.transactionHash]}return""}));if(console.log("transfers",a),a.filter(e=>""!==e).length>0)return(0,n.jsxs)("table",{className:"table is-striped is-hoverable is-fullwidth",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Previous Owner"}),(0,n.jsx)("th",{children:"Transfered on"}),(0,n.jsx)("th",{children:"transactionHash"})]})}),(0,n.jsx)("tbody",{children:a.filter(e=>""!==e).map((e,t)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e[0]}),(0,n.jsx)("td",{children:e[1]}),(0,n.jsx)("td",{children:e[2]})]},t))})]})})(t,q).then(e=>{console.log("Previous Transfers:",e),$(e)}).catch(e=>{console.error("Error:",e)})}catch(e){console.error("Error:",e)}},ex=()=>new Promise(async(e,t)=>{try{let a=await _.eth.getPastLogs({fromBlock:0,toBlock:"latest",address:"0x9BadAa81fF2748b44A272D5957CD631E0B4021aA",topics:["0xc3fb6c98272d7a0d5dc26727b61c00ece2e5bf3dbdc0284659e28d441c1ce06c"]});console.log("IPTransferredEvents",a);let n=[];a.forEach(e=>{console.log("FaucetEvents",e);try{let t=_.eth.abi.decodeLog([{type:"address",name:"requester",indexed:!1},{type:"uint256",name:"amount",indexed:!1}],e.data);t.blockNumber=e.blockNumber,console.log(t.amount),n.push(t)}catch(e){console.error("Error decoding Faucet log:",e)}}),(async function(e){let t=await Promise.all(e.map(async e=>{if(e.requester.toLowerCase()===B[0].toLowerCase()){let t=await _.eth.getBlock(e.blockNumber),a=new Date(parseInt(1e3*Number(t.timestamp))).toString();return[a]}return""}));console.log("transfers",t);let a=t.filter(e=>""!==e).map(e=>new Date(e));console.log("validTransfers",a);let n=new Date(Math.max.apply(null,a));console.log("latest faucet transfer",n);let s=new Date,r=Math.floor((s-n)/1e3);return console.log("differenceInSeconds",r),!(r<ee)||!!isNaN(r)})(n).then(t=>{console.log("Previous Faucet:",t),e(t)}).catch(e=>{console.error("Error:",e),t(e)})}catch(e){console.error("Error:",e),t(e)}}),ev=()=>new Promise(async(e,t)=>{try{let a=await _.eth.getPastLogs({fromBlock:0,toBlock:"latest",address:"0x9BadAa81fF2748b44A272D5957CD631E0B4021aA",topics:["0x5bad4487d7b168048a56fc9dcab8014e86f128b0b713f7db167188fc05d844fa"]});console.log("IPRegisteredEvents",a);let s=[];a.forEach(e=>{console.log("IPRegisteredEvents",e);try{let t=_.eth.abi.decodeLog([{type:"address",name:"owner",indexed:!1},{type:"string",name:"sha512",indexed:!1}],e.data);s.push(t)}catch(e){console.error("Error decoding Faucet log:",e)}}),(async function(e){let a=await Promise.all(e.map(async e=>e.owner.toLowerCase()===ea.toLowerCase()?[e.sha512]:""));if(console.log("IPRegisteredEvents",a),a.filter(e=>""!==e).length>0)return(0,n.jsxs)("table",{className:"table is-striped is-hoverable is-fullwidth",children:[(0,n.jsx)("thead",{children:(0,n.jsx)("tr",{children:(0,n.jsx)("th",{children:"First registration on this address"})})}),(0,n.jsx)("tbody",{children:a.filter(e=>""!==e).map((e,t)=>(0,n.jsx)("tr",{children:(0,n.jsx)("td",{children:e})},t))})]});eC("No sha512 registered on this address"),t()})(s).then(t=>{console.log("IPRegisteredEvents:",t),eo(t),e()}).catch(e=>{console.error("Error:",e),t(e)})}catch(e){console.error("Error:",e),t(e)}}),eb=()=>new Promise(async(e,t)=>{try{let a=await _.eth.getPastLogs({fromBlock:0,toBlock:"latest",address:"0x9BadAa81fF2748b44A272D5957CD631E0B4021aA",topics:["0xca00f8032cdcf162c969609d82f6c8d2f473b3321c01f6323283abfa6abbdfbc"]});console.log("IPTransferredEvents",a);let s=[];a.forEach(e=>{console.log("IPTransferredEvents",e);try{let t=_.eth.abi.decodeLog([{type:"address",name:"from",indexed:!1},{type:"address",name:"to",indexed:!1},{type:"string",name:"sha512",indexed:!1},{type:"uint256",name:"amount",indexed:!1}],e.data);s.push(t)}catch(e){console.error("Error decoding Faucet log:",e)}}),(async function(e){let t=await Promise.all(e.map(async e=>e.from.toLowerCase()===ea.toLowerCase()?[e.sha512]:"")),a=await Promise.all(e.map(async e=>e.to.toLowerCase()===ea.toLowerCase()?[e.sha512]:""));return console.log("getIPTransferredEvents_from",t),console.log("getIPTransferredEvents_to",a),0===t.filter(e=>""!==e).length&&(t[0]="no transfers"),0===a.filter(e=>""!==e).length&&(a[0]="no sales"),(0,n.jsxs)("table",{className:"table is-striped is-hoverable is-fullwidth",children:[(0,n.jsx)("thead",{children:(0,n.jsx)("tr",{children:(0,n.jsx)("th",{children:"Received via Transfer"})})}),(0,n.jsx)("tbody",{children:a.filter(e=>""!==e).map((e,t)=>(0,n.jsx)("tr",{children:(0,n.jsx)("td",{children:e})},t))}),(0,n.jsx)("thead",{children:(0,n.jsx)("tr",{children:(0,n.jsx)("th",{children:"Sold via Transfer"})})}),(0,n.jsx)("tbody",{children:t.filter(e=>""!==e).map((e,t)=>(0,n.jsx)("tr",{children:(0,n.jsx)("td",{children:e})},t))})]})})(s).then(t=>{console.log("IPTransferred:",t),er(t),e()}).catch(e=>{console.error("Error:",e),t(e)})}catch(e){console.error("Error:",e),t(e)}}),ew=async()=>{console.log("c",M);let e=await eE(M);if(e){try{let e=await window.ethereum.request({method:"eth_call",params:[{from:B[0],to:w.options.address,data:w.methods.getIP(M).encodeABI()},"latest"]});console.log(e,"ge");let t=await _.eth.abi.decodeParameters(["address","uint96","bool"],e);if(console.log(t[0]),42===t[0].length){eC("This SHA512 is already registered"),F("");return}}catch(e){console.error("Error in getRegisteredIpHandler:",e)}try{let e=await window.ethereum.request({method:"eth_call",params:[{from:B[0],to:v.options.address,data:v.methods.readApprovalFor(m).encodeABI()},"latest"]}),t=_.utils.hexToNumber(e);if("0x"===e||t<c){eC("Approval not sufficient");return}}catch(e){console.error("Allowance error:",e.data.message),eC(e.data.message);return}try{let e=await window.ethereum.request({method:"eth_sendTransaction",params:[{from:B[0],to:w.options.address,data:w.methods.setIP(M).encodeABI()},"latest"]});console.log("receipt:",e),eA("Registration successful!")}catch(e){console.error("setting IPT failed:",e),eC(e.data.message)}}},ej=async()=>{console.log("c",q);let e=await eE(q);if(e)try{let e=await window.ethereum.request({method:"eth_call",params:[{from:B[0],to:w.options.address,data:w.methods.getIP(q).encodeABI()},"latest"]}),t=await _.eth.abi.decodeParameters(["address","uint96","bool"],e);console.log("decoded",t);let a=new Date(1e3*parseInt(t[1])).toString();D(t[0]),H(a),ef()}catch(e){console.error("Error in getRegisteredIpHandler:",e),eC(e.message),D(""),H(""),$("");return}},eT=async()=>{try{if(42!==ea.length){eC("This is probably not a valid address");return}ev(),eb()}catch(e){console.error("Error in listenForAddressTransferEvents:",e);return}},eI=async()=>{let e=await eE(Y);if(e){if(isNaN(U)||U.length<1){eC("Please type a whole number as amount");return}try{let e=await window.ethereum.request({method:"eth_call",params:[{from:B[0],to:w.options.address,data:w.methods.getIP(Y).encodeABI()},"latest"]});console.log(e,"ge");let t=await _.eth.abi.decodeParameters(["address","uint96","bool"],e);if(console.log("address",t[0]),t[0].toLowerCase()!==B[0].toLowerCase()){eC("This SHA512 is not registered under your address"),W("");return}}catch(e){console.error("Error in getRegisteredIpHandler:",e)}try{let e=await window.ethereum.request({method:"eth_call",params:[{from:B[0],to:v.options.address,data:v.methods.balanceOf(z).encodeABI()},"latest"]}),t=_.utils.hexToNumber(e);if(t<1e18*U){eC("The balance of buyer (".concat(t/1e18," IPT) is lower than the requested price: ").concat(U," IPT"));return}}catch(e){ep(e,"Please type a valid address","");return}try{let e=await window.ethereum.request({method:"eth_sendTransaction",params:[{from:B[0],to:w.options.address,data:w.methods.sellerCreatesSalesIntent(Y,1e18*U,z).encodeABI()},"latest"]});eA("Successfully created transfer offer"),console.log("receipt:",e)}catch(e){console.error("offering IP failed:",e),eC(e.data.message)}}},eN=async()=>{let e=await eE(V);if(e){if(isNaN(Q)||Q.length<1){eC("Please type a whole number as amount");return}try{let e=await window.ethereum.request({method:"eth_call",params:[{from:B[0],to:w.options.address,data:w.methods.getSalesIntent(V).encodeABI()},"latest"]}),t=await _.eth.abi.decodeParameters(["address","uint192","uint64","bool"],e);if(t[0].toLowerCase()!==B[0].toLowerCase()){eC("You are not the buyer");return}if(Number(t[1])!==1e18*Number(Q)){console.log("buying price",t[1]),eC("Not the right buying price, should be:",t[1]/1e18);return}if(!t[3]){eC("This is not for sale");return}}catch(e){console.error("Error in getting sales intent:",e.data.message),eC(e.data.message);return}try{let e=await window.ethereum.request({method:"eth_call",params:[{from:B[0],to:v.options.address,data:v.methods.readApprovalFor(m).encodeABI()},"latest"]}),t=_.utils.hexToNumber(e);if("0x"===e)eC("Approval 0 is smaller than the agreed price ".concat(Q));else if(t<1e18*Q){eC("Approval ".concat(t/1e18," is smaller than the agreed price ").concat(Q));return}}catch(e){console.error("Allowance error:",e.data.message),eC(e.data.message);return}try{let e=await window.ethereum.request({method:"eth_call",params:[{from:B[0],to:v.options.address,data:v.methods.balanceOf(B[0]).encodeABI()},"latest"]}),t=_.utils.hexToNumber(e);if(t<1e18*Q){eC("The balance of buyer (".concat(t/1e18," IPT) is lower than the requested price: ").concat(Q," IPT"));return}}catch(e){ep(e,"Please type a valid address","");return}try{let e=await window.ethereum.request({method:"eth_sendTransaction",params:[{from:B[0],to:w.options.address,data:w.methods.buyerBuysIP(V,1e18*Q,!0).encodeABI()},"latest"]});eA("IP successfully transfered!"),console.log("receipt:",e)}catch(e){console.error("buying IPT failed:",e),eC(e.data.message)}}},eP=e=>{navigator.clipboard.writeText(e).then(()=>{console.log("Text copied to clipboard:",e)}).catch(e=>{console.error("Error copying text to clipboard:",e)})},ek=async()=>{try{let e=await _.eth.sendTransaction({from:B[0],to:B[0],value:0,nonce:-1});console.log(e)}catch(e){eC("resend failed",e)}};(0,l.useEffect)(()=>{ec()},[]),(0,l.useEffect)(()=>{console.log("Loading:",C)},[C]),(0,l.useEffect)(()=>{console.log(_)},[_]),(0,l.useEffect)(()=>{ey()},[ey,B]);let eC=e=>{g.Am.error(e,{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},eA=e=>{g.Am.success(e,{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},e_=e=>{let t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth",block:"start"})},eE=async e=>{try{let t=0;console.log("string",e),128!==e.length&&(console.log("length",e.length),eC("This is not a valid sha512. The length should be 128 characters."),t=1);let a=/^[0-9a-fA-F]+$/;if(a.test(e)||(console.log("hex",a.test(e)),eC("This is not a valid sha512. It contains illegal characters."),t=1),1===t)return D(""),H(""),$(""),!1;return!0}catch(e){console.log(e)}};return(0,l.useEffect)(()=>{let e=async()=>{let e=await fetch("/whitepaper.md"),t=await e.text(),a=await (0,i.q)(t);ed(a)};e()},[]),(0,n.jsxs)("div",{className:y().main,children:[(0,n.jsxs)(r(),{children:[(0,n.jsx)("title",{children:"IP trade"}),(0,n.jsx)("meta",{name:"description",content:"An IP marketplace app"})]}),(0,n.jsx)(g.Ix,{}),(0,n.jsx)("nav",{className:y().whiteBackground,style:{position:"absolute",zIndex:1,width:"100%",backgroundColor:"rgba(255, 255, 255, 0)"},children:(0,n.jsxs)("div",{className:y().container,style:{display:"flex",alignItems:"center"},children:[(0,n.jsx)("div",{className:"navbar-brand",style:{color:"white"},children:(0,n.jsxs)("div",{className:"content",children:[(0,n.jsx)("h2",{children:"IP trade "}),(0,n.jsx)("h4",{children:"Register your creative content on-chain"})]})}),(0,n.jsx)("div",{className:y().navbarEnd,style:{width:"15%"},children:(0,n.jsx)("button",{onClick:ec,className:"button is-fullwidth",children:"Connect Wallet"})})]})}),(0,n.jsx)("nav",{className:y().whiteBackground,children:(0,n.jsx)("div",{style:{position:"relative",width:"100vw",height:"100vh"},children:(0,n.jsx)(x(),{src:"./images/ipt_coin.jpg",alt:"top_image",fill:!0,style:{objectFit:"cover"}})})}),(0,n.jsx)(e=>{let{onSelect:t}=e,a=e=>{e.preventDefault();let a=e.target.getAttribute("data-id");t(a)};return(0,n.jsxs)("div",{className:y().topbar,children:[(0,n.jsx)("a",{href:"#","data-id":"approve",onClick:a,children:"Approve spending"}),(0,n.jsx)("a",{href:"#","data-id":"register",onClick:a,children:"Register IP"}),(0,n.jsx)("a",{href:"#","data-id":"check",onClick:a,children:"Check IP"}),(0,n.jsx)("a",{href:"#","data-id":"transfer",onClick:a,children:"Transfer IP"}),(0,n.jsx)("a",{href:"#","data-id":"wp",onClick:a,children:"Whitepaper"})]})},{onSelect:e=>{t(e),e_(e)}}),(0,n.jsx)(e=>{let{faucet:t}=e;return t?(0,n.jsx)("nav",{className:y().whiteBackground,children:(0,n.jsxs)("div",{className:y().container,children:[(0,n.jsx)("div",{className:"navbar-brand",children:(0,n.jsx)("h1",{children:"Your connection to IP trade"})}),(0,n.jsxs)("div",{className:y().navbarEnd,children:[(0,n.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,n.jsx)("div",{style:{marginRight:"10px",width:"15%"},children:(0,n.jsx)("button",{onClick:()=>window.open(T,"_blank"),className:"button is-outlined is-small",children:"View this contract on Etherscan"})})}),(0,n.jsxs)("div",{className:y().container,children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,n.jsxs)("p",{style:{marginRight:"10px"},children:["Your address: ",(0,n.jsx)("strong",{children:"".concat(C?" please connect wallet":B[0])})]}),(0,n.jsx)("button",{onClick:()=>eP(C?"Address not loaded":B[0]),className:"button is-outlined is-small",children:"Copy Address"})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,n.jsxs)("p",{style:{marginRight:"10px"},children:["IPT address: ",(0,n.jsx)("strong",{children:b})]}),(0,n.jsx)("button",{onClick:()=>eP(C?"Address not loaded":b),className:"button is-outlined is-small",children:"Copy Address"})]}),(0,n.jsxs)("p",{children:["Faucet height: ",String(t)/1e18," IPT every ",ee/86400," days "]}),(0,n.jsxs)("p",{children:["IP Registration : ",String(c)/1e18," IPT"]}),(0,n.jsxs)("p",{children:["IP Transfer : ",String(u)/1e18," IPT"]})]}),(0,n.jsx)("div",{className:y().navbarEnd,style:{width:"15%"},children:(0,n.jsx)("button",{onClick:eg,className:"button is-outlined is-fullwidth ".concat(C?"is-loading":" "),children:"get IPT here"})})]})]})}):(0,n.jsx)("nav",{className:y().whiteBackground,children:(0,n.jsx)("div",{children:"Please wait for faucet to connect..."})})},{faucet:a}),(0,n.jsxs)("div",{id:"approve",children:["approve"===e&&(0,n.jsxs)("nav",{className:y().whiteBackground,children:[(0,n.jsx)("div",{className:y().container,children:(0,n.jsx)("div",{className:"navbar-brand",children:(0,n.jsx)("div",{className:"content",children:(0,n.jsx)("h1",{children:"Set allowance"})})})}),(0,n.jsx)("div",{children:(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:y().container,children:[(0,n.jsx)("div",{className:"has-text-left",style:{margin:"15px",width:"40%"},children:(0,n.jsxs)("div",{className:"content",children:[(0,n.jsx)("p",{children:"The contract needs your approval to spend IPT on your behalf."}),(0,n.jsx)("p",{children:"Please make sure to approve at least the amount that you need for the desired transaction. Every transaction reduces the allowance until it reaches 0."})]})}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,n.jsxs)("p",{className:"has-text-left",style:{margin:"10px",width:"50%"},children:["The address of this contract is ",j]}),(0,n.jsx)("button",{onClick:()=>eP(j),className:"button is-outlined is-small",children:"Copy Address"})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,n.jsxs)("div",{style:{width:"50%"},children:[(0,n.jsx)("label",{htmlFor:"approveAddress",children:"Address to approve:"}),(0,n.jsx)("input",{className:"input",type:"text",id:"approveAddress",value:m,onChange:e=>f(e.target.value)})]}),(0,n.jsx)("div",{className:y().navbarEnd,style:{width:"15%"},children:(0,n.jsx)("button",{onClick:eh,className:"button is-outlined is-fullwidth ".concat(C?"is-loading":""),children:"check allowance"})})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,n.jsxs)("div",{style:{width:"50%"},children:[(0,n.jsx)("label",{htmlFor:"approveAmount",children:"Amount to approve:"}),(0,n.jsx)("input",{className:"input",type:"text",id:"approveAmount",value:I,onChange:e=>N(e.target.value)})]}),(0,n.jsx)("div",{className:y().navbarEnd,style:{width:"15%"},children:(0,n.jsx)("button",{onClick:eu,className:"button is-outlined is-fullwidth ".concat(C?"is-loading":""),children:"set allowance"})})]})]})})})]}),"approve"===e&&(0,n.jsx)("nav",{className:y().whiteBackground,children:(0,n.jsx)("div",{className:y().container,children:(0,n.jsxs)("div",{children:["Allowance for address ",m,": ",String(P)/1e18," IPT"]})})}),"approve"===e&&(0,n.jsx)("nav",{className:y().whiteBackground,children:(0,n.jsx)("div",{className:y().container,children:(0,n.jsx)("div",{className:y().navbarEnd,style:{width:"15%"},children:(0,n.jsx)("button",{onClick:em,className:"button is-outlined is-fullwidth ".concat(C?"is-loading":""),children:"revoke allowance"})})})})]}),(0,n.jsx)("div",{id:"register",children:"register"===e&&(0,n.jsxs)("nav",{className:y().whiteBackground,children:[(0,n.jsx)("div",{className:y().container,children:(0,n.jsx)("div",{className:"navbar-brand",children:(0,n.jsx)("h1",{children:"Register content"})})}),(0,n.jsxs)("div",{className:y().container,style:{display:"flex",alignItems:"center"},children:[(0,n.jsxs)("div",{style:{width:"50%"},children:[(0,n.jsx)("label",{htmlFor:"registersha512",children:"sha512"}),(0,n.jsx)("input",{className:"input",type:"text",id:"registersha512",value:M,onChange:e=>F(e.target.value)})]}),(0,n.jsx)("div",{className:y().navbarEnd,style:{width:"15%"},children:(0,n.jsx)("button",{onClick:ew,className:"button is-outlined is-fullwidth ".concat(C?"is-loading":""),children:"register IP"})})]})]})}),(0,n.jsxs)("div",{id:"check",children:["check"===e&&(0,n.jsxs)("nav",{className:y().whiteBackground,children:[(0,n.jsx)("div",{className:y().container,children:(0,n.jsx)("div",{className:"navbar-brand",children:(0,n.jsx)("h1",{children:"Check registered content"})})}),(0,n.jsxs)("div",{className:y().container,style:{display:"flex",alignItems:"center"},children:[(0,n.jsxs)("div",{style:{width:"50%"},children:[(0,n.jsx)("label",{htmlFor:"checksha512",children:"sha512"}),(0,n.jsx)("input",{className:"input",type:"text",id:"checksha512",value:q,onChange:e=>R(e.target.value)})]}),(0,n.jsx)("div",{className:y().navbarEnd,style:{width:"15%"},children:(0,n.jsx)("button",{onClick:ej,className:"button is-outlined is-fullwidth ".concat(C?"is-loading":""),children:"check registration"})})]}),(0,n.jsxs)("div",{className:y().container,children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Current owner"}),": ",L]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"First registered at"}),": ",O]}),"\n",Z]})]}),"check"===e&&(0,n.jsxs)("nav",{className:y().whiteBackground,children:[(0,n.jsx)("div",{className:y().container,children:(0,n.jsx)("div",{className:"navbar-brand",children:(0,n.jsx)("h1",{children:"sha512 registrations and transfers per address"})})}),(0,n.jsxs)("div",{className:y().container,style:{display:"flex",alignItems:"center"},children:[(0,n.jsxs)("div",{style:{width:"50%"},children:[(0,n.jsx)("label",{htmlFor:"IPOnAddress",children:"Address"}),(0,n.jsx)("input",{className:"input",type:"text",id:"IPOnAddress",value:ea,onChange:e=>en(e.target.value)})]}),(0,n.jsx)("div",{className:y().navbarEnd,style:{width:"15%"},children:(0,n.jsx)("button",{onClick:eT,className:"button is-outlined is-fullwidth ".concat(C?"is-loading":""),children:"check address"})})]}),(0,n.jsxs)("div",{className:y().container,children:[ei,es]})]})]}),(0,n.jsxs)("div",{id:"transfer",children:["transfer"===e&&(0,n.jsxs)("nav",{className:y().whiteBackground,children:[(0,n.jsx)("div",{className:y().container,children:(0,n.jsx)("div",{className:"navbar-brand",children:(0,n.jsx)("h1",{children:"Offer content to another address"})})}),(0,n.jsxs)("div",{className:y().container,children:[(0,n.jsxs)("div",{style:{width:"50%"},children:[(0,n.jsx)("label",{htmlFor:"offerIpsha512",children:"sha512"}),(0,n.jsx)("input",{className:"input",type:"text",id:"offerIpsha512",value:Y,onChange:e=>W(e.target.value)})]}),(0,n.jsxs)("div",{style:{width:"50%"},children:[(0,n.jsx)("label",{htmlFor:"offerIpAddress",children:"Address"}),(0,n.jsx)("input",{className:"input",type:"text",id:"offerIpAddress",value:z,onChange:e=>G(e.target.value)})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,n.jsxs)("div",{style:{width:"50%"},children:[(0,n.jsx)("label",{htmlFor:"offerIpPrice",children:"Price in IPT"}),(0,n.jsx)("input",{className:"input",type:"text",id:"offerIpPrice",value:U,onChange:e=>K(e.target.value)})]}),(0,n.jsx)("div",{className:y().navbarEnd,style:{width:"15%"},children:(0,n.jsx)("button",{onClick:eI,className:"button is-outlined is-fullwidth ".concat(C?"is-loading":""),children:"offer IP"})})]})]})]}),"transfer"===e&&(0,n.jsxs)("nav",{className:y().whiteBackground,children:[(0,n.jsx)("div",{className:y().container,children:(0,n.jsx)("div",{className:"navbar-brand",children:(0,n.jsx)("h1",{children:"Accept offer"})})}),(0,n.jsxs)("div",{className:y().container,children:[(0,n.jsxs)("div",{style:{width:"50%"},children:[(0,n.jsx)("label",{htmlFor:"buyIpsha512",children:"sha512"}),(0,n.jsx)("input",{className:"input",type:"text",id:"buyIpsha512",value:V,onChange:e=>J(e.target.value)})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,n.jsxs)("div",{style:{width:"50%"},children:[(0,n.jsx)("label",{htmlFor:"buyIpPrice",children:"Price in IPT"}),(0,n.jsx)("input",{className:"input",type:"text",id:"buyIpPrice",value:Q,onChange:e=>X(e.target.value)})]}),(0,n.jsx)("div",{className:y().navbarEnd,style:{width:"15%"},children:(0,n.jsx)("button",{onClick:eN,className:"button is-outlined is-fullwidth ".concat(C?"is-loading":""),children:"Accept IP"})})]})]})]})]}),(0,n.jsx)("div",{id:"resend",children:"wp"===e&&(0,n.jsx)("div",{className:y().markdownBody,children:el?(0,n.jsx)(o.R,{...el}):(0,n.jsx)("p",{children:"Loading..."})})}),(0,n.jsx)("div",{id:"wp",children:"resend"===e&&(0,n.jsx)("button",{onClick:ek,className:"button is-outlined is-fullwidth",children:"resend"})}),(0,n.jsx)(()=>(0,n.jsx)("nav",{className:y().whiteBackground,children:(0,n.jsx)("div",{className:y().footer,children:(0,n.jsx)("p",{children:"\xa9 2024 SquaredAnt GmbH. All rights reserved."})})}),{})]})}},1455:function(e){e.exports={main:"ipt_main__L_YTG",whiteBackground:"ipt_whiteBackground__6aOUa",input:"ipt_input__4g_fY",help:"ipt_help__X1lop","navbar-brand":"ipt_navbar-brand__Su_u5",navbarEnd:"ipt_navbarEnd__p68ET",container:"ipt_container__I6D_A",dropdowncontainer:"ipt_dropdowncontainer__HOY3z",dropdowncontent:"ipt_dropdowncontent__tmwLd",visible:"ipt_visible__zKzyx",topbar:"ipt_topbar__7PuA0",content:"ipt_content__W7QdB",footer:"ipt_footer__nHNLp",app:"ipt_app___LATL",markdownBody:"ipt_markdownBody__m2xYJ"}}},function(e){e.O(0,[722,377,638,970,971,472,744],function(){return e(e.s=377)}),_N_E=e.O()}]);