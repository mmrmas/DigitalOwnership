(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5545:function(){},377:function(e,t,n){Promise.resolve().then(n.bind(n,4036))},4036:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var a=n(7437),s=n(3574),r=n.n(s),i=n(3062),o=n(4332),l=n(2265),d=n(6737);let c=new d.ZPm("wss://eth-mainnet.g.alchemy.com/v2/5zq4W6KtB5W3j8kmGC1NGbawDglgoiTU"),p=new c.eth.Contract([{inputs:[{internalType:"uint256",name:"cap",type:"uint256"},{internalType:"uint256",name:"mintAtLaunch",type:"uint256"},{internalType:"uint256",name:"reward",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"uint256",name:"increasedSupply",type:"uint256"},{internalType:"uint256",name:"cap",type:"uint256"}],name:"ERC20ExceededCap",type:"error"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"allowance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientAllowance",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC20InvalidApprover",type:"error"},{inputs:[{internalType:"uint256",name:"cap",type:"uint256"}],name:"ERC20InvalidCap",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC20InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC20InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"spender",type:"address"}],name:"ERC20InvalidSpender",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"blockReward",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"value",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"burnFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"cap",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contractAddress",type:"address"}],name:"readApprovalFor",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"approvedAddress",type:"address"}],name:"revokeApproval",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalMined",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],"0xAb6bEda66d62e3fB053767646acb2B3f384dCdC0"),u=new c.eth.Contract([{inputs:[{internalType:"address",name:"tokenAddress",type:"address"}],stateMutability:"payable",type:"constructor"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"string",name:"sha512",type:"string"}],name:"IPRegistered",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"from",type:"address"},{indexed:!1,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"string",name:"sha512",type:"string"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"IPTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"ipowner",type:"address"},{indexed:!1,internalType:"string",name:"sha512",type:"string"}],name:"IpDeleted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"OwnerIPTWithdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"seller",type:"address"},{indexed:!1,internalType:"string",name:"sha512",type:"string"}],name:"SalesIntentCancelled",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"seller",type:"address"},{indexed:!1,internalType:"string",name:"sha512",type:"string"}],name:"SalesIntentCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"requester",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"TokensRequested",type:"event"},{stateMutability:"payable",type:"fallback"},{inputs:[{internalType:"string",name:"str",type:"string"},{internalType:"uint192",name:"salesPrice",type:"uint192"}],name:"buyerBuysIP",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"deleteIP",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"freeIpTokenwithdrawal",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"getIP",outputs:[{components:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint96",name:"creationTimeStamp",type:"uint96"},{internalType:"bool",name:"exists",type:"bool"}],internalType:"struct IPtrade.IPowner",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"getSalesIntent",outputs:[{components:[{internalType:"address",name:"buyer_address",type:"address"},{internalType:"uint192",name:"salesPrice",type:"uint192"},{internalType:"uint64",name:"creationTimeStamp",type:"uint64"},{internalType:"bool",name:"exists",type:"bool"}],internalType:"struct IPtrade.Onsale",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"lockTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"registerIPCostIpt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"requestTokens",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"sellerCancelsSalesIntent",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"str",type:"string"},{internalType:"uint192",name:"salesPrice",type:"uint192"},{internalType:"address",name:"buyerAddress",type:"address"}],name:"sellerCreatesSalesIntent",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"}],name:"setFreeIpTokenwithdrawal",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"setIP",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_register",type:"uint256"},{internalType:"uint256",name:"_transfer",type:"uint256"}],name:"setIPCostIpt",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"}],name:"setLockTime",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address payable",name:"_new_owner",type:"address"}],name:"setNewOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"transferIPCostIpt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"unregisteredIPT",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],"0x9BadAa81fF2748b44A272D5957CD631E0B4021aA");var h={IPTContract:p,IPtrade:u};n(8646);var m=n(1455),y=n.n(m);n(6016);var g=n(7948);n(3343);var f=n(6691),v=n.n(f);let{Alchemy:x}=n(8044),b=h.IPTContract,w=h.IPTContract._address;console.log("add",b);let j=h.IPtrade,T=j.options.address,I="https://etherscan.io/address/".concat(T);var N=()=>{let[e,t]=(0,l.useState)("approve"),[n,s]=(0,l.useState)(""),[c,p]=(0,l.useState)(""),[u,h]=(0,l.useState)(""),[m,f]=(0,l.useState)(T),[N,k]=(0,l.useState)(""),[P,_]=(0,l.useState)(""),[C,A]=(0,l.useState)(!0),[B,E]=(0,l.useState)(!1),[S,M]=(0,l.useState)(null),[q,F]=(0,l.useState)([]),[R,L]=(0,l.useState)(""),[D,O]=(0,l.useState)(""),[G,H]=(0,l.useState)(""),[W,K]=(0,l.useState)(""),[z,U]=(0,l.useState)(""),[Y,V]=(0,l.useState)(""),[Z,J]=(0,l.useState)(""),[Q,X]=(0,l.useState)(""),[$,ee]=(0,l.useState)(""),[et,en]=(0,l.useState)(""),[ea,es]=(0,l.useState)(""),[er,ei]=(0,l.useState)(""),[eo,el]=(0,l.useState)(""),[ed,ec]=(0,l.useState)(""),[ep,eu]=(0,l.useState)(null),eh=async()=>{console.log("connect wallet");try{if(void 0!==window.ethereum){var e;let n=window.ethereum;(null===(e=window.ethereum.providers)||void 0===e?void 0:e.length)&&window.ethereum.providers.forEach(async e=>{e.isMetaMask&&(n=e)});let a=await n.request({method:"eth_requestAccounts",params:[]});F(a);let s=new d.BvB(window.ethereum);M(s),A(!1),E(!1),console.log("MetaMask is installed!"),t("approve")}}catch(e){try{console.log("fallback");let e=new d.BvB(new d.BvB.providers.HttpProvider("https://worldchain-mainnet.g.alchemy.com/v2/5zq4W6KtB5W3j8kmGC1NGbawDglgoiTU"));console.log(e),M(e),E(!1),console.log("Using fallback provider"),t("check"),eE("No Metamask connected. Read-only mode")}catch(e){eB("Connection failed")}}},em=(e,t,n)=>{e&&e.message&&(e=e.message);let a=e.toString(),s=a.match(/value "([^"]+)" at "\/0" must pass "address" validation/),r=a.match(/value "([^"]+)" at "\/1" must pass "uint256" validation/),i=a.match(/denied/);console.log(a),i?console.log("Match found:",i[0]):console.log("No match found"),s&&s[0]?(console.error("Caught specific error:",s[0]),eB(t)):r&&r[0]?(console.error("Caught specific error:",r[0]),eB(n)):i&&i[0]?(console.error("Caught specific error:",i[0]),eB("User denied transaction")):(console.error("Caught an error:",a),eB(a))},ey=async()=>{try{await window.ethereum.request({method:"eth_sendTransaction",params:[{from:q[0],to:b.options.address,data:b.methods.approve(m,1e18*N).encodeABI()}]}),console.log("Approval successful")}catch(e){em(e,"Please type a valid address","Please type a whole number as amount")}},eg=async()=>{console.log("Pressed to read approval");try{let e=await window.ethereum.request({method:"eth_call",params:[{from:q[0],to:b.options.address,data:b.methods.readApprovalFor(m).encodeABI()},"latest"]});if("0x"===e)console.log("Approval:",e),_(0);else{let t=S.utils.hexToNumber(e);console.log("Approval:",t),_(t)}}catch(e){em(e,"Please type a valid address","")}},ef=async()=>{console.log("Pressed to revoke approval");try{await window.ethereum.request({method:"eth_sendTransaction",params:[{from:q[0],to:b.options.address,data:b.methods.revokeApproval(m).encodeABI()},"latest"]}),console.log("revoked approval for:",m)}catch(e){em(e,"Please type a valid address","")}},ev=(0,l.useCallback)(async()=>{try{let e=await window.ethereum.request({method:"eth_call",params:[{from:q[0],to:j.options.address,data:j.methods.freeIpTokenwithdrawal().encodeABI()},"latest"]});s(e);let t=await window.ethereum.request({method:"eth_call",params:[{from:q[0],to:j.options.address,data:j.methods.registerIPCostIpt().encodeABI()},"latest"]});p(t);let n=await window.ethereum.request({method:"eth_call",params:[{from:q[0],to:j.options.address,data:j.methods.transferIPCostIpt().encodeABI()},"latest"]});h(n);let a=await window.ethereum.request({method:"eth_call",params:[{from:q[0],to:j.options.address,data:j.methods.lockTime().encodeABI()},"latest"]});es(a)}catch(e){eB("Failed to load faucet info")}},[q]),ex=async()=>{console.log("get free IPT");let e=await ew();if(console.log("timePassedCheck",e),!e){eB("Not enough time since last transfer");return}try{let e=await window.ethereum.request({method:"eth_sendTransaction",params:[{from:q[0],to:j.options.address,data:j.methods.requestTokens().encodeABI()},"latest"]});console.log("receipt:",e),eE("IPT collection successful!")}catch(e){console.error("getting IPT failed:",e),eB(e.data.message)}},eb=async()=>{try{en("No previous owners");let e=new x({apiKey:"5zq4W6KtB5W3j8kmGC1NGbawDglgoiTU",network:"eth-mainnet"});console.log("alchemy",e);let t=await e.core.getLogs({fromBlock:0,toBlock:"latest",address:"0x9BadAa81fF2748b44A272D5957CD631E0B4021aA",topics:["0xca00f8032cdcf162c969609d82f6c8d2f473b3321c01f6323283abfa6abbdfbc"]});console.log("IPTransferredEvents",t);let n=[];t.forEach(e=>{console.log("event",e);try{let t=S.eth.abi.decodeLog([{type:"address",name:"from",indexed:!1},{type:"address",name:"to",indexed:!1},{type:"string",name:"sha512",indexed:!1},{type:"uint256",name:"amount",indexed:!1}],e.data);t.blockNumber=e.blockNumber,t.transactionHash=e.transactionHash,console.log(t.amount),n.push(t)}catch(e){console.error("Error decoding log:",e)}}),(async function(e,t){let n=await Promise.all(e.map(async e=>{if(e.sha512===t){let t=await S.eth.getBlock(e.blockNumber),n=new Date(parseInt(1e3*Number(t.timestamp))).toString();return[e.from,n,e.transactionHash]}return""}));if(console.log("transfers",n),n.filter(e=>""!==e).length>0)return(0,a.jsxs)("table",{className:"table is-striped is-hoverable is-fullwidth",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Previous Owner"}),(0,a.jsx)("th",{children:"Transfered on"}),(0,a.jsx)("th",{children:"transactionHash"})]})}),(0,a.jsx)("tbody",{children:n.filter(e=>""!==e).map((e,t)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e[0]}),(0,a.jsx)("td",{children:e[1]}),(0,a.jsx)("td",{children:e[2]})]},t))})]})})(n,D).then(e=>{console.log("Previous Transfers:",e),en(e)}).catch(e=>{console.error("Error:",e)})}catch(e){console.error("Error:",e)}},ew=()=>new Promise(async(e,t)=>{try{let n=new x({apiKey:"5zq4W6KtB5W3j8kmGC1NGbawDglgoiTU",network:"eth-mainnet"}),a=await n.core.getLogs({fromBlock:0,toBlock:"latest",address:"0x9BadAa81fF2748b44A272D5957CD631E0B4021aA",topics:["0xc3fb6c98272d7a0d5dc26727b61c00ece2e5bf3dbdc0284659e28d441c1ce06c"]});console.log("IPTransferredEvents",a);let s=[];a.forEach(e=>{console.log("FaucetEvents",e);try{let t=S.eth.abi.decodeLog([{type:"address",name:"requester",indexed:!1},{type:"uint256",name:"amount",indexed:!1}],e.data);t.blockNumber=e.blockNumber,console.log(t.amount),s.push(t)}catch(e){console.error("Error decoding Faucet log:",e)}}),(async function(e){let t=await Promise.all(e.map(async e=>{if(e.requester.toLowerCase()===q[0].toLowerCase()){let t=await S.eth.getBlock(e.blockNumber),n=new Date(parseInt(1e3*Number(t.timestamp))).toString();return[n]}return""}));console.log("transfers",t);let n=t.filter(e=>""!==e).map(e=>new Date(e));console.log("validTransfers",n);let a=new Date(Math.max.apply(null,n));console.log("latest faucet transfer",a);let s=new Date,r=Math.floor((s-a)/1e3);return console.log("differenceInSeconds",r),!(r<ea)||!!isNaN(r)})(s).then(t=>{console.log("Previous Faucet:",t),e(t)}).catch(e=>{console.error("Error:",e),t(e)})}catch(e){console.error("Error:",e),t(e)}}),ej=()=>new Promise(async(e,t)=>{try{let n=new x({apiKey:"5zq4W6KtB5W3j8kmGC1NGbawDglgoiTU",network:"eth-mainnet"}),s=await n.core.getLogs({fromBlock:0,toBlock:"latest",address:"0x9BadAa81fF2748b44A272D5957CD631E0B4021aA",topics:["0x5bad4487d7b168048a56fc9dcab8014e86f128b0b713f7db167188fc05d844fa"]});console.log("IPRegisteredEvents",s);let r=[];s.forEach(e=>{console.log("IPRegisteredEvents",e);try{let t=S.eth.abi.decodeLog([{type:"address",name:"owner",indexed:!1},{type:"string",name:"sha512",indexed:!1}],e.data);r.push(t)}catch(e){console.error("Error decoding Faucet log:",e)}}),(async function(e){let n=await Promise.all(e.map(async e=>e.owner.toLowerCase()===er.toLowerCase()?[e.sha512]:""));if(console.log("IPRegisteredEvents",n),n.filter(e=>""!==e).length>0)return(0,a.jsxs)("table",{className:"table is-striped is-hoverable is-fullwidth",children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{children:(0,a.jsx)("th",{children:"First registration on this address"})})}),(0,a.jsx)("tbody",{children:n.filter(e=>""!==e).map((e,t)=>(0,a.jsx)("tr",{children:(0,a.jsx)("td",{children:e})},t))})]});eB("No sha512 registered on this address"),t()})(r).then(t=>{console.log("IPRegisteredEvents:",t),ec(t),e()}).catch(e=>{console.error("Error:",e),t(e)})}catch(e){console.error("Error:",e),t(e)}}),eT=()=>new Promise(async(e,t)=>{try{let n=new x({apiKey:"5zq4W6KtB5W3j8kmGC1NGbawDglgoiTU",network:"eth-mainnet"}),s=await n.core.getLogs({fromBlock:0,toBlock:"latest",address:"0x9BadAa81fF2748b44A272D5957CD631E0B4021aA",topics:["0xca00f8032cdcf162c969609d82f6c8d2f473b3321c01f6323283abfa6abbdfbc"]});console.log("IPTransferredEvents",s);let r=[];s.forEach(e=>{console.log("IPTransferredEvents",e);try{let t=S.eth.abi.decodeLog([{type:"address",name:"from",indexed:!1},{type:"address",name:"to",indexed:!1},{type:"string",name:"sha512",indexed:!1},{type:"uint256",name:"amount",indexed:!1}],e.data);r.push(t)}catch(e){console.error("Error decoding Faucet log:",e)}}),(async function(e){let t=await Promise.all(e.map(async e=>e.from.toLowerCase()===er.toLowerCase()?[e.sha512]:"")),n=await Promise.all(e.map(async e=>e.to.toLowerCase()===er.toLowerCase()?[e.sha512]:""));return console.log("getIPTransferredEvents_from",t),console.log("getIPTransferredEvents_to",n),0===t.filter(e=>""!==e).length&&(t[0]="no transfers"),0===n.filter(e=>""!==e).length&&(n[0]="no sales"),(0,a.jsxs)("table",{className:"table is-striped is-hoverable is-fullwidth",children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{children:(0,a.jsx)("th",{children:"Received via Transfer"})})}),(0,a.jsx)("tbody",{children:n.filter(e=>""!==e).map((e,t)=>(0,a.jsx)("tr",{children:(0,a.jsx)("td",{children:e})},t))}),(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{children:(0,a.jsx)("th",{children:"Sold via Transfer"})})}),(0,a.jsx)("tbody",{children:t.filter(e=>""!==e).map((e,t)=>(0,a.jsx)("tr",{children:(0,a.jsx)("td",{children:e})},t))})]})})(r).then(t=>{console.log("IPTransferred:",t),el(t),e()}).catch(e=>{console.error("Error:",e),t(e)})}catch(e){console.error("Error:",e),t(e)}}),eI=async()=>{console.log("c",R);let e=await eM(R);if(console.log("this is a SHA-512 string"),e){eq();try{let e=await window.ethereum.request({method:"eth_call",params:[{from:q[0],to:b.options.address,data:b.methods.readApprovalFor(m).encodeABI()},"latest"]}),t=S.utils.hexToNumber(e);if("0x"===e||t<c){eB("Approval not sufficient");return}}catch(e){console.error("Allowance error:",e.data.message),eB(e.data.message);return}try{let e=await window.ethereum.request({method:"eth_sendTransaction",params:[{from:q[0],to:j.options.address,data:j.methods.setIP(R).encodeABI()},"latest"]});console.log("receipt:",e),eE("Registration successful!")}catch(e){console.error("setting IPT failed:",e),eB(e.data.message)}}},eN=async()=>{console.log("c",D);let e=await eM(D);if(e)try{let e=await window.ethereum.request({method:"eth_call",params:[{to:j.options.address,data:j.methods.getIP(D).encodeABI()},"latest"]});console.log("getCheckedsha512",e);let t=await S.eth.abi.decodeParameters(["address","uint96","bool"],e);console.log("decoded",t);let n=new Date(1e3*parseInt(t[1])).toString();H(t[0]),K(n),eb()}catch(e){console.error("Error in getRegisteredIpHandler:",e),eB(e.message),H(""),K(""),en("");return}},ek=async()=>{try{if(42!==er.length){eB("This is probably not a valid address");return}ej(),eT()}catch(e){console.error("Error in listenForAddressTransferEvents:",e);return}},eP=async()=>{let e=await eM(z);if(e){if(isNaN(Z)||Z.length<1){eB("Please type a whole number as amount");return}try{let e=await window.ethereum.request({method:"eth_call",params:[{from:q[0],to:j.options.address,data:j.methods.getIP(z).encodeABI()},"latest"]});console.log(e,"ge");let t=await S.eth.abi.decodeParameters(["address","uint96","bool"],e);if(console.log("address",t[0]),t[0].toLowerCase()!==q[0].toLowerCase()){eB("This SHA512 is not registered under your address"),U("");return}}catch(e){console.error("Error in getRegisteredIpHandler:",e)}try{let e=await window.ethereum.request({method:"eth_call",params:[{from:q[0],to:b.options.address,data:b.methods.balanceOf(Y).encodeABI()},"latest"]}),t=S.utils.hexToNumber(e);if(t<1e18*Z){eB("The balance of buyer (".concat(t/1e18," IPT) is lower than the requested price: ").concat(Z," IPT"));return}}catch(e){em(e,"Please type a valid address","");return}try{let e=await window.ethereum.request({method:"eth_sendTransaction",params:[{from:q[0],to:j.options.address,data:j.methods.sellerCreatesSalesIntent(z,1e18*Z,Y).encodeABI()},"latest"]});eE("Successfully created transfer offer"),console.log("receipt:",e)}catch(e){console.error("offering IP failed:",e),eB(e.data.message)}}},e_=async()=>{let e=await eM(Q);if(e){if(isNaN($)||$.length<1){eB("Please type a whole number as amount");return}try{let e=await window.ethereum.request({method:"eth_call",params:[{from:q[0],to:j.options.address,data:j.methods.getSalesIntent(Q).encodeABI()},"latest"]}),t=await S.eth.abi.decodeParameters(["address","uint192","uint64","bool"],e);if(t[0].toLowerCase()!==q[0].toLowerCase()){eB("You are not the buyer");return}if(Number(t[1])!==1e18*Number($)){console.log("buying price",t[1]),eB("Not the right buying price, should be:",t[1]/1e18);return}if(!t[3]){eB("This is not for sale");return}}catch(e){console.error("Error in getting sales intent:",e.data.message),eB(e.data.message);return}try{let e=await window.ethereum.request({method:"eth_call",params:[{from:q[0],to:b.options.address,data:b.methods.readApprovalFor(m).encodeABI()},"latest"]}),t=S.utils.hexToNumber(e);if("0x"===e)eB("Approval 0 is smaller than the agreed price ".concat($));else if(t<1e18*$){eB("Approval ".concat(t/1e18," is smaller than the agreed price ").concat($));return}}catch(e){console.error("Allowance error:",e.data.message),eB(e.data.message);return}try{let e=await window.ethereum.request({method:"eth_call",params:[{from:q[0],to:b.options.address,data:b.methods.balanceOf(q[0]).encodeABI()},"latest"]}),t=S.utils.hexToNumber(e);if(t<1e18*$){eB("The balance of buyer (".concat(t/1e18," IPT) is lower than the requested price: ").concat($," IPT"));return}}catch(e){em(e,"Please type a valid address","");return}try{let e=await window.ethereum.request({method:"eth_sendTransaction",params:[{from:q[0],to:j.options.address,data:j.methods.buyerBuysIP(Q,1e18*$,!0).encodeABI()},"latest"]});eE("IP successfully transfered!"),console.log("receipt:",e)}catch(e){console.error("buying IPT failed:",e),eB(e.data.message)}}},eC=e=>{navigator.clipboard.writeText(e).then(()=>{console.log("Text copied to clipboard:",e)}).catch(e=>{console.error("Error copying text to clipboard:",e)})},eA=async()=>{try{let e=await S.eth.sendTransaction({from:q[0],to:q[0],value:0,nonce:-1});console.log(e)}catch(e){eB("resend failed",e)}};(0,l.useEffect)(()=>{eh()},[]),(0,l.useEffect)(()=>{console.log("Loading:",C)},[C]),(0,l.useEffect)(()=>{console.log(S)},[S]),(0,l.useEffect)(()=>{ev()},[ev,q]);let eB=e=>{g.Am.error(e,{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},eE=e=>{g.Am.success(e,{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},eS=e=>{let t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth",block:"start"})},eM=async e=>{try{let t=0;console.log("string",e),128!==e.length&&(console.log("length",e.length),eB("This is not a valid sha512. The length should be 128 characters."),t=1);let n=/^[0-9a-fA-F]+$/;if(n.test(e)||(console.log("hex",n.test(e)),eB("This is not a valid sha512. It contains illegal characters."),t=1),1===t)return H(""),K(""),en(""),!1;return!0}catch(e){console.log(e)}};async function eq(){let e;try{if(!(e=await window.ethereum.request({method:"eth_call",params:[{from:q[0],to:j.options.address,data:j.methods.getIP(R).encodeABI()},"latest"]}))||"0x"===e){console.log("Revert or empty response detected, continuing execution.");return}let t=await S.eth.abi.decodeParameters(["address","uint96","bool"],e);if(console.log(t[0]),42===t[0].length){eB("This SHA512 is already registered"),L("");return}}catch(e){console.error("No registration of this SHAsum:",e)}console.log("Script continues after catch block.")}return(0,l.useEffect)(()=>{let e=async()=>{let e=await fetch("/whitepaper.md"),t=await e.text(),n=await (0,i.q)(t);eu(n)};e()},[]),(0,a.jsxs)("div",{className:y().main,children:[(0,a.jsxs)(r(),{children:[(0,a.jsx)("title",{children:"IP trade"}),(0,a.jsx)("meta",{name:"description",content:"An IP marketplace app"})]}),(0,a.jsx)(g.Ix,{}),(0,a.jsx)("nav",{className:y().whiteBackground,style:{position:"absolute",zIndex:1,width:"100%",backgroundColor:"rgba(255, 255, 255, 0)"},children:(0,a.jsxs)("div",{className:y().container,style:{display:"flex",alignItems:"center"},children:[(0,a.jsx)("div",{className:"navbar-brand",style:{color:"white"},children:(0,a.jsxs)("div",{className:"content",children:[(0,a.jsx)("h2",{children:"IP trade "}),(0,a.jsx)("h4",{children:"Register your creative content on-chain"})]})}),(0,a.jsx)("div",{className:y().navbarEnd,style:{width:"15%"},children:(0,a.jsx)("button",{onClick:eh,className:"button is-fullwidth",children:"Connect Wallet"})})]})}),(0,a.jsx)("nav",{className:y().whiteBackground,children:(0,a.jsx)("div",{style:{position:"relative",width:"100vw",height:"100vh"},children:(0,a.jsx)(v(),{src:"./images/ipt_coin.jpg",alt:"top_image",fill:!0,style:{objectFit:"cover"}})})}),(0,a.jsx)(e=>{let{onSelect:t}=e,n=e=>{e.preventDefault();let n=e.target.getAttribute("data-id");t(n)};return(0,a.jsxs)("div",{className:y().navbar,children:[(0,a.jsx)("a",{href:"#","data-id":"approve",onClick:n,children:"Approve spending"}),(0,a.jsx)("a",{href:"#","data-id":"register",onClick:n,children:"Register IP"}),(0,a.jsx)("a",{href:"#","data-id":"check",onClick:n,children:"Check IP"}),(0,a.jsx)("a",{href:"#","data-id":"transfer",onClick:n,children:"Transfer IP"}),(0,a.jsx)("a",{href:"#","data-id":"wp",onClick:n,children:"Whitepaper"})]})},{onSelect:e=>{t(e),eS(e)}}),(0,a.jsx)(e=>{let{faucet:t}=e;return t?(0,a.jsx)("div",{className:y().card,children:(0,a.jsx)("nav",{className:y().whiteBackground,children:(0,a.jsxs)("div",{className:y().container,children:[(0,a.jsx)("div",{className:"navbar-brand",children:(0,a.jsx)("h1",{children:"Your connection to IP trade"})}),(0,a.jsxs)("div",{className:y().navbarEnd,children:[(0,a.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,a.jsx)("div",{style:{marginRight:"10px",width:"15%"},children:(0,a.jsx)("button",{onClick:()=>window.open(I,"_blank"),className:"button is-outlined is-small",children:"View this contract on Etherscan"})})}),(0,a.jsxs)("div",{className:y().container,children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsxs)("p",{style:{marginRight:"10px"},children:["Your address: ",(0,a.jsx)("strong",{children:"".concat(C?" please connect wallet":q[0])})]}),(0,a.jsx)("button",{onClick:()=>eC(C?"Address not loaded":q[0]),className:"button is-outlined is-small",children:"Copy Address"})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsxs)("p",{style:{marginRight:"10px"},children:["IPT address: ",(0,a.jsx)("strong",{children:w})]}),(0,a.jsx)("button",{onClick:()=>eC(C?"Address not loaded":w),className:"button is-outlined is-small",children:"Copy Address"})]}),(0,a.jsxs)("p",{children:["Faucet height: ",String(t)/1e18," IPT every ",ea/86400," days "]}),(0,a.jsxs)("p",{children:["IP Registration : ",String(c)/1e18," IPT"]}),(0,a.jsxs)("p",{children:["IP Transfer : ",String(u)/1e18," IPT"]})]}),(0,a.jsx)("div",{className:y().navbarEnd,style:{width:"15%"},children:(0,a.jsx)("button",{onClick:ex,className:"button is-outlined is-fullwidth ".concat(C?"is-loading":" "),children:"get IPT here"})})]})]})})}):(0,a.jsx)("nav",{className:y().whiteBackground,children:(0,a.jsx)("div",{children:"Please wait for faucet to connect..."})})},{faucet:n}),(0,a.jsx)("div",{id:"approve",children:"approve"===e&&(0,a.jsxs)("div",{className:y().card,children:[(0,a.jsxs)("nav",{className:y().whiteBackground,children:[(0,a.jsx)("div",{className:y().container,children:(0,a.jsx)("div",{className:"navbar-brand",children:(0,a.jsx)("div",{className:y().container,children:(0,a.jsx)("h1",{children:"Set allowance"})})})}),(0,a.jsx)("div",{children:(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:y().container,children:[(0,a.jsx)("div",{className:"has-text-left",style:{margin:"15px",width:"40%"},children:(0,a.jsxs)("div",{className:"content",children:[(0,a.jsx)("p",{children:"The contract needs your approval to spend IPT on your behalf."}),(0,a.jsx)("p",{children:"Please make sure to approve at least the amount that you need for the desired transaction. Every transaction reduces the allowance until it reaches 0."})]})}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsxs)("p",{className:"has-text-left",style:{margin:"10px",width:"50%"},children:["The address of this contract is ",T]}),(0,a.jsx)("button",{onClick:()=>eC(T),className:"button is-outlined is-small",children:"Copy Address"})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsxs)("div",{style:{width:"50%"},children:[(0,a.jsx)("label",{htmlFor:"approveAddress",children:"Address to approve:"}),(0,a.jsx)("input",{className:"input",type:"text",id:"approveAddress",value:m,onChange:e=>f(e.target.value)})]}),(0,a.jsx)("div",{className:y().navbarEnd,style:{width:"15%"},children:(0,a.jsx)("button",{onClick:eg,className:"button is-outlined is-fullwidth ".concat(C?"is-loading":""),children:"check allowance"})})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsxs)("div",{style:{width:"50%"},children:[(0,a.jsx)("label",{htmlFor:"approveAmount",children:"Amount to approve:"}),(0,a.jsx)("input",{className:"input",type:"text",id:"approveAmount",value:N,onChange:e=>k(e.target.value)})]}),(0,a.jsx)("div",{className:y().navbarEnd,style:{width:"15%"},children:(0,a.jsx)("button",{onClick:ey,className:"button is-outlined is-fullwidth ".concat(C?"is-loading":""),children:"set allowance"})})]})]})})})]}),(0,a.jsx)("nav",{className:y().whiteBackground,children:(0,a.jsx)("div",{className:y().container,children:(0,a.jsxs)("div",{children:["Allowance for address ",m,": ",String(P)/1e18," IPT"]})})}),(0,a.jsx)("nav",{className:y().whiteBackground,children:(0,a.jsx)("div",{className:y().container,children:(0,a.jsx)("div",{className:y().navbarEnd,style:{width:"15%"},children:(0,a.jsx)("button",{onClick:ef,className:"button is-outlined is-fullwidth ".concat(C?"is-loading":""),children:"revoke allowance"})})})})]})}),(0,a.jsx)("div",{id:"register",children:"register"===e&&(0,a.jsx)("div",{className:y().card,children:(0,a.jsxs)("nav",{className:y().whiteBackground,children:[(0,a.jsx)("div",{className:y().container,children:(0,a.jsx)("div",{className:"navbar-brand",children:(0,a.jsx)("h1",{children:"Register content"})})}),(0,a.jsxs)("div",{className:y().container,style:{display:"flex",alignItems:"center"},children:[(0,a.jsxs)("div",{style:{width:"50%"},children:[(0,a.jsx)("label",{htmlFor:"registersha512",children:"sha512"}),(0,a.jsx)("input",{className:"input",type:"text",id:"registersha512",value:R,onChange:e=>L(e.target.value)})]}),(0,a.jsx)("div",{className:y().navbarEnd,style:{width:"15%"},children:(0,a.jsx)("button",{onClick:eI,className:"button is-outlined is-fullwidth ".concat(C?"is-loading":""),children:"register IP"})})]})]})})}),(0,a.jsx)("div",{id:"check",children:"check"===e&&(0,a.jsxs)("div",{className:y().card,children:[(0,a.jsxs)("nav",{className:y().whiteBackground,children:[(0,a.jsx)("div",{className:y().container,children:(0,a.jsx)("div",{className:"navbar-brand",children:(0,a.jsx)("h1",{children:"Check registered content"})})}),(0,a.jsxs)("div",{className:y().container,style:{display:"flex",alignItems:"center"},children:[(0,a.jsxs)("div",{style:{width:"50%"},children:[(0,a.jsx)("label",{htmlFor:"checksha512",children:"sha512"}),(0,a.jsx)("input",{className:"input",type:"text",id:"checksha512",value:D,onChange:e=>O(e.target.value)})]}),(0,a.jsx)("div",{className:y().navbarEnd,style:{width:"15%"},children:(0,a.jsx)("button",{onClick:eN,className:"button is-outlined is-fullwidth ".concat(B?"is-loading":""),children:"check registration"})})]}),(0,a.jsxs)("div",{className:y().container,children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Current owner"}),": ",G]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"First registered at"}),": ",W]}),"\n",et]})]}),(0,a.jsxs)("nav",{className:y().whiteBackground,children:[(0,a.jsx)("div",{className:y().container,children:(0,a.jsx)("div",{className:"navbar-brand",children:(0,a.jsx)("h1",{children:"sha512 registrations and transfers per address"})})}),(0,a.jsxs)("div",{className:y().container,style:{display:"flex",alignItems:"center"},children:[(0,a.jsxs)("div",{style:{width:"50%"},children:[(0,a.jsx)("label",{htmlFor:"IPOnAddress",children:"Address"}),(0,a.jsx)("input",{className:"input",type:"text",id:"IPOnAddress",value:er,onChange:e=>ei(e.target.value)})]}),(0,a.jsx)("div",{className:y().navbarEnd,style:{width:"15%"},children:(0,a.jsx)("button",{onClick:ek,className:"button is-outlined is-fullwidth ".concat(B?"is-loading":""),children:"check address"})})]}),(0,a.jsxs)("div",{className:y().container,children:[ed,eo]})]})]})}),(0,a.jsx)("div",{id:"transfer",children:"transfer"===e&&(0,a.jsxs)("div",{className:y().card,children:[(0,a.jsxs)("nav",{className:y().whiteBackground,children:[(0,a.jsx)("div",{className:y().container,children:(0,a.jsx)("div",{className:"navbar-brand",children:(0,a.jsx)("h1",{children:"Offer content to another address"})})}),(0,a.jsxs)("div",{className:y().container,children:[(0,a.jsxs)("div",{style:{width:"50%"},children:[(0,a.jsx)("label",{htmlFor:"offerIpsha512",children:"sha512"}),(0,a.jsx)("input",{className:"input",type:"text",id:"offerIpsha512",value:z,onChange:e=>U(e.target.value)})]}),(0,a.jsxs)("div",{style:{width:"50%"},children:[(0,a.jsx)("label",{htmlFor:"offerIpAddress",children:"Address"}),(0,a.jsx)("input",{className:"input",type:"text",id:"offerIpAddress",value:Y,onChange:e=>V(e.target.value)})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsxs)("div",{style:{width:"50%"},children:[(0,a.jsx)("label",{htmlFor:"offerIpPrice",children:"Price in IPT"}),(0,a.jsx)("input",{className:"input",type:"text",id:"offerIpPrice",value:Z,onChange:e=>J(e.target.value)})]}),(0,a.jsx)("div",{className:y().navbarEnd,style:{width:"15%"},children:(0,a.jsx)("button",{onClick:eP,className:"button is-outlined is-fullwidth ".concat(C?"is-loading":""),children:"offer IP"})})]})]})]}),(0,a.jsxs)("nav",{className:y().whiteBackground,children:[(0,a.jsx)("div",{className:y().container,children:(0,a.jsx)("div",{className:"navbar-brand",children:(0,a.jsx)("h1",{children:"Accept offer"})})}),(0,a.jsxs)("div",{className:y().container,children:[(0,a.jsxs)("div",{style:{width:"50%"},children:[(0,a.jsx)("label",{htmlFor:"buyIpsha512",children:"sha512"}),(0,a.jsx)("input",{className:"input",type:"text",id:"buyIpsha512",value:Q,onChange:e=>X(e.target.value)})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsxs)("div",{style:{width:"50%"},children:[(0,a.jsx)("label",{htmlFor:"buyIpPrice",children:"Price in IPT"}),(0,a.jsx)("input",{className:"input",type:"text",id:"buyIpPrice",value:$,onChange:e=>ee(e.target.value)})]}),(0,a.jsx)("div",{className:y().navbarEnd,style:{width:"15%"},children:(0,a.jsx)("button",{onClick:e_,className:"button is-outlined is-fullwidth ".concat(C?"is-loading":""),children:"Accept IP"})})]})]})]})]})}),(0,a.jsx)("div",{id:"resend",children:"wp"===e&&(0,a.jsx)("div",{className:y().markdownBody,children:ep?(0,a.jsx)(o.R,{...ep}):(0,a.jsx)("p",{children:"Loading..."})})}),(0,a.jsx)("div",{id:"wp",children:"resend"===e&&(0,a.jsx)("button",{onClick:eA,className:"button is-outlined is-fullwidth",children:"resend"})}),(0,a.jsx)(()=>(0,a.jsx)("nav",{className:y().whiteBackground,children:(0,a.jsx)("div",{className:y().footer,children:(0,a.jsx)("p",{children:"\xa9 2024 SquaredAnt GmbH. All rights reserved."})})}),{})]})}},6016:function(){},1455:function(e){e.exports={main:"ipt_main__L_YTG",whiteBackground:"ipt_whiteBackground__6aOUa",input:"ipt_input__4g_fY",help:"ipt_help__X1lop",navbar:"ipt_navbar__agwMZ","navbar-brand":"ipt_navbar-brand__Su_u5",navbarEnd:"ipt_navbarEnd__p68ET",container:"ipt_container__I6D_A",dropdowncontainer:"ipt_dropdowncontainer__HOY3z",dropdowncontent:"ipt_dropdowncontent__tmwLd",visible:"ipt_visible__zKzyx",topbar:"ipt_topbar__7PuA0",content:"ipt_content__W7QdB",footer:"ipt_footer__nHNLp",app:"ipt_app___LATL",markdownBody:"ipt_markdownBody__m2xYJ",h1:"ipt_h1__pG9la",h2:"ipt_h2__x2wmO",h4:"ipt_h4__qC0uu",button:"ipt_button__0L7qw",card:"ipt_card__GFOfu"}}},function(e){e.O(0,[722,674,377,638,205,971,472,744],function(){return e(e.s=377)}),_N_E=e.O()}]);