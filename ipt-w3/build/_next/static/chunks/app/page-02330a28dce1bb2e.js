(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{377:function(e,t,n){Promise.resolve().then(n.bind(n,4036))},4036:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return T}});var a=n(7437),s=n(3574),r=n.n(s),i=n(2265),o=n(6737),l=n(9792);let d=new o.ZPm(l.env.ALCHEMY_WS),c=new d.eth.Contract([{inputs:[{internalType:"uint256",name:"cap",type:"uint256"},{internalType:"uint256",name:"mintAtLaunch",type:"uint256"},{internalType:"uint256",name:"reward",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"uint256",name:"increasedSupply",type:"uint256"},{internalType:"uint256",name:"cap",type:"uint256"}],name:"ERC20ExceededCap",type:"error"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"allowance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientAllowance",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC20InvalidApprover",type:"error"},{inputs:[{internalType:"uint256",name:"cap",type:"uint256"}],name:"ERC20InvalidCap",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC20InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC20InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"spender",type:"address"}],name:"ERC20InvalidSpender",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"blockReward",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"value",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"burnFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"cap",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contractAddress",type:"address"}],name:"readApprovalFor",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"approvedAddress",type:"address"}],name:"revokeApproval",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalMined",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],"0xAb6bEda66d62e3fB053767646acb2B3f384dCdC0"),p=new d.eth.Contract([{inputs:[{internalType:"address",name:"tokenAddress",type:"address"}],stateMutability:"payable",type:"constructor"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"string",name:"sha512",type:"string"}],name:"IPRegistered",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"from",type:"address"},{indexed:!1,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"string",name:"sha512",type:"string"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"IPTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"ipowner",type:"address"},{indexed:!1,internalType:"string",name:"sha512",type:"string"}],name:"IpDeleted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"OwnerIPTWithdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"seller",type:"address"},{indexed:!1,internalType:"string",name:"sha512",type:"string"}],name:"SalesIntentCancelled",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"seller",type:"address"},{indexed:!1,internalType:"string",name:"sha512",type:"string"}],name:"SalesIntentCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"requester",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"TokensRequested",type:"event"},{stateMutability:"payable",type:"fallback"},{inputs:[{internalType:"string",name:"str",type:"string"},{internalType:"uint192",name:"salesPrice",type:"uint192"}],name:"buyerBuysIP",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"deleteIP",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"freeIpTokenwithdrawal",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"getIP",outputs:[{components:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint96",name:"creationTimeStamp",type:"uint96"},{internalType:"bool",name:"exists",type:"bool"}],internalType:"struct IPtrade.IPowner",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"getSalesIntent",outputs:[{components:[{internalType:"address",name:"buyer_address",type:"address"},{internalType:"uint192",name:"salesPrice",type:"uint192"},{internalType:"uint64",name:"creationTimeStamp",type:"uint64"},{internalType:"bool",name:"exists",type:"bool"}],internalType:"struct IPtrade.Onsale",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"lockTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"registerIPCostIpt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"requestTokens",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"sellerCancelsSalesIntent",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"str",type:"string"},{internalType:"uint192",name:"salesPrice",type:"uint192"},{internalType:"address",name:"buyerAddress",type:"address"}],name:"sellerCreatesSalesIntent",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"}],name:"setFreeIpTokenwithdrawal",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"setIP",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_register",type:"uint256"},{internalType:"uint256",name:"_transfer",type:"uint256"}],name:"setIPCostIpt",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"}],name:"setLockTime",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address payable",name:"_new_owner",type:"address"}],name:"setNewOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"transferIPCostIpt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"unregisteredIPT",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],"0x9BadAa81fF2748b44A272D5957CD631E0B4021aA");var u={IPTContract:c,IPtrade:p};n(8646);var h=n(1455),m=n.n(h),y=n(7948);n(3343);var g=n(6691),b=n.n(g);let f=u.IPTContract,x=u.IPTContract._address;console.log("add",f);let v=u.IPtrade,w=v.options.address,j="https://etherscan.io/address/".concat(w);var T=()=>{let[e,t]=(0,i.useState)("approve"),[n,s]=(0,i.useState)(""),[l,d]=(0,i.useState)(""),[c,p]=(0,i.useState)(""),[u,h]=(0,i.useState)(w),[g,T]=(0,i.useState)(""),[I,N]=(0,i.useState)(""),[P,k]=(0,i.useState)(!0),[C,_]=(0,i.useState)(null),[A,E]=(0,i.useState)([]),[B,S]=(0,i.useState)(""),[M,F]=(0,i.useState)(""),[R,q]=(0,i.useState)(""),[L,O]=(0,i.useState)(""),[H,D]=(0,i.useState)(""),[Y,z]=(0,i.useState)(""),[G,W]=(0,i.useState)(""),[U,V]=(0,i.useState)(""),[K,Q]=(0,i.useState)(""),[X,Z]=(0,i.useState)(""),[$,J]=(0,i.useState)(""),[ee,et]=(0,i.useState)(""),[en,ea]=(0,i.useState)(""),[es,er]=(0,i.useState)(""),ei=async()=>{if(console.log("connect wallet"),void 0!==window.ethereum){var e;let t=window.ethereum;(null===(e=window.ethereum.providers)||void 0===e?void 0:e.length)&&window.ethereum.providers.forEach(async e=>{e.isMetaMask&&(t=e)}),E(await t.request({method:"eth_requestAccounts",params:[]})),_(new o.BvB(window.ethereum)),k(!1),console.log("MetaMask is installed!")}else console.log("Please install Metamask")},eo=(e,t,n)=>{e&&e.message&&(e=e.message);let a=e.toString(),s=a.match(/value "([^"]+)" at "\/0" must pass "address" validation/),r=a.match(/value "([^"]+)" at "\/1" must pass "uint256" validation/),i=a.match(/denied/);console.log(a),i?console.log("Match found:",i[0]):console.log("No match found"),s&&s[0]?(console.error("Caught specific error:",s[0]),eI(t)):r&&r[0]?(console.error("Caught specific error:",r[0]),eI(n)):i&&i[0]?(console.error("Caught specific error:",i[0]),eI("User denied transaction")):(console.error("Caught an error:",a),eI(a))},el=async()=>{try{await window.ethereum.request({method:"eth_sendTransaction",params:[{from:A[0],to:f.options.address,data:f.methods.approve(u,1e18*g).encodeABI()}]}),console.log("Approval successful")}catch(e){eo(e,"Please type a valid address","Please type a whole number as amount")}},ed=async()=>{console.log("Pressed to read approval");try{let e=await window.ethereum.request({method:"eth_call",params:[{from:A[0],to:f.options.address,data:f.methods.readApprovalFor(u).encodeABI()},"latest"]});if("0x"===e)console.log("Approval:",e),N(0);else{let t=C.utils.hexToNumber(e);console.log("Approval:",t),N(t)}}catch(e){eo(e,"Please type a valid address","")}},ec=async()=>{console.log("Pressed to revoke approval");try{await window.ethereum.request({method:"eth_sendTransaction",params:[{from:A[0],to:f.options.address,data:f.methods.revokeApproval(u).encodeABI()},"latest"]}),console.log("revoked approval for:",u)}catch(e){eo(e,"Please type a valid address","")}},ep=(0,i.useCallback)(async()=>{try{let e=await window.ethereum.request({method:"eth_call",params:[{from:A[0],to:v.options.address,data:v.methods.freeIpTokenwithdrawal().encodeABI()},"latest"]});s(e);let t=await window.ethereum.request({method:"eth_call",params:[{from:A[0],to:v.options.address,data:v.methods.registerIPCostIpt().encodeABI()},"latest"]});d(t);let n=await window.ethereum.request({method:"eth_call",params:[{from:A[0],to:v.options.address,data:v.methods.transferIPCostIpt().encodeABI()},"latest"]});p(n);let a=await window.ethereum.request({method:"eth_call",params:[{from:A[0],to:v.options.address,data:v.methods.lockTime().encodeABI()},"latest"]});J(a)}catch(e){eI(e.toString())}},[A]),eu=async()=>{console.log("get free IPT");let e=await em();if(console.log("timePassedCheck",e),!e){eI("Not enough time since last transfer");return}try{let e=await window.ethereum.request({method:"eth_sendTransaction",params:[{from:A[0],to:v.options.address,data:v.methods.requestTokens().encodeABI()},"latest"]});console.log("receipt:",e),eN("IPT collection successful!")}catch(e){console.error("getting IPT failed:",e),eI(e.data.message)}},eh=async()=>{try{Z("No previous owners");let e=await C.eth.getPastLogs({fromBlock:0,toBlock:"latest",address:"0x9de04769ddC87b9196Ed5c9595A9b113F1193b5c",topics:["0xca00f8032cdcf162c969609d82f6c8d2f473b3321c01f6323283abfa6abbdfbc"]});console.log("IPTransferredEvents",e);let t=[];e.forEach(e=>{console.log("event",e);try{let n=C.eth.abi.decodeLog([{type:"address",name:"from",indexed:!1},{type:"address",name:"to",indexed:!1},{type:"string",name:"sha512",indexed:!1},{type:"uint256",name:"amount",indexed:!1}],e.data);n.blockNumber=e.blockNumber,n.transactionHash=e.transactionHash,console.log(n.amount),t.push(n)}catch(e){console.error("Error decoding log:",e)}}),(async function(e,t){let n=await Promise.all(e.map(async e=>{if(e.sha512===t){let t=await C.eth.getBlock(e.blockNumber),n=new Date(parseInt(1e3*Number(t.timestamp))).toString();return[e.from,n,e.transactionHash]}return""}));if(console.log("transfers",n),n.filter(e=>""!==e).length>0)return(0,a.jsxs)("table",{className:"table is-striped is-hoverable is-fullwidth",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Previous Owner"}),(0,a.jsx)("th",{children:"Transfered on"}),(0,a.jsx)("th",{children:"transactionHash"})]})}),(0,a.jsx)("tbody",{children:n.filter(e=>""!==e).map((e,t)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e[0]}),(0,a.jsx)("td",{children:e[1]}),(0,a.jsx)("td",{children:e[2]})]},t))})]})})(t,M).then(e=>{console.log("Previous Transfers:",e),Z(e)}).catch(e=>{console.error("Error:",e)})}catch(e){console.error("Error:",e)}},em=()=>new Promise(async(e,t)=>{try{let n=await C.eth.getPastLogs({fromBlock:0,toBlock:"latest",address:"0x9de04769ddC87b9196Ed5c9595A9b113F1193b5c",topics:["0xc3fb6c98272d7a0d5dc26727b61c00ece2e5bf3dbdc0284659e28d441c1ce06c"]});console.log("IPTransferredEvents",n);let a=[];n.forEach(e=>{console.log("FaucetEvents",e);try{let t=C.eth.abi.decodeLog([{type:"address",name:"requester",indexed:!1},{type:"uint256",name:"amount",indexed:!1}],e.data);t.blockNumber=e.blockNumber,console.log(t.amount),a.push(t)}catch(e){console.error("Error decoding Faucet log:",e)}}),(async function(e){let t=await Promise.all(e.map(async e=>{if(e.requester.toLowerCase()===A[0].toLowerCase()){let t=await C.eth.getBlock(e.blockNumber),n=new Date(parseInt(1e3*Number(t.timestamp))).toString();return[n]}return""}));console.log("transfers",t);let n=t.filter(e=>""!==e).map(e=>new Date(e));console.log("validTransfers",n);let a=new Date(Math.max.apply(null,n));console.log("latest faucet transfer",a);let s=new Date,r=Math.floor((s-a)/1e3);return console.log("differenceInSeconds",r),!(r<$)||!!isNaN(r)})(a).then(t=>{console.log("Previous Faucet:",t),e(t)}).catch(e=>{console.error("Error:",e),t(e)})}catch(e){console.error("Error:",e),t(e)}}),ey=()=>new Promise(async(e,t)=>{try{let n=await C.eth.getPastLogs({fromBlock:0,toBlock:"latest",address:"0x9de04769ddC87b9196Ed5c9595A9b113F1193b5c",topics:["0x5bad4487d7b168048a56fc9dcab8014e86f128b0b713f7db167188fc05d844fa"]});console.log("IPRegisteredEvents",n);let s=[];n.forEach(e=>{console.log("IPRegisteredEvents",e);try{let t=C.eth.abi.decodeLog([{type:"address",name:"owner",indexed:!1},{type:"string",name:"sha512",indexed:!1}],e.data);s.push(t)}catch(e){console.error("Error decoding Faucet log:",e)}}),(async function(e){let n=await Promise.all(e.map(async e=>e.owner.toLowerCase()===ee.toLowerCase()?[e.sha512]:""));if(console.log("IPRegisteredEvents",n),n.filter(e=>""!==e).length>0)return(0,a.jsxs)("table",{className:"table is-striped is-hoverable is-fullwidth",children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{children:(0,a.jsx)("th",{children:"First registration on this address"})})}),(0,a.jsx)("tbody",{children:n.filter(e=>""!==e).map((e,t)=>(0,a.jsx)("tr",{children:(0,a.jsx)("td",{children:e})},t))})]});eI("No sha512 registered on this address"),t()})(s).then(t=>{console.log("IPRegisteredEvents:",t),er(t),e()}).catch(e=>{console.error("Error:",e),t(e)})}catch(e){console.error("Error:",e),t(e)}}),eg=()=>new Promise(async(e,t)=>{try{let n=await C.eth.getPastLogs({fromBlock:0,toBlock:"latest",address:"0x9de04769ddC87b9196Ed5c9595A9b113F1193b5c",topics:["0xca00f8032cdcf162c969609d82f6c8d2f473b3321c01f6323283abfa6abbdfbc"]});console.log("IPTransferredEvents",n);let s=[];n.forEach(e=>{console.log("IPTransferredEvents",e);try{let t=C.eth.abi.decodeLog([{type:"address",name:"from",indexed:!1},{type:"address",name:"to",indexed:!1},{type:"string",name:"sha512",indexed:!1},{type:"uint256",name:"amount",indexed:!1}],e.data);s.push(t)}catch(e){console.error("Error decoding Faucet log:",e)}}),(async function(e){let t=await Promise.all(e.map(async e=>e.from.toLowerCase()===ee.toLowerCase()?[e.sha512]:"")),n=await Promise.all(e.map(async e=>e.to.toLowerCase()===ee.toLowerCase()?[e.sha512]:""));return console.log("getIPTransferredEvents_from",t),console.log("getIPTransferredEvents_to",n),0===t.filter(e=>""!==e).length&&(t[0]="no transfers"),0===n.filter(e=>""!==e).length&&(n[0]="no sales"),(0,a.jsxs)("table",{className:"table is-striped is-hoverable is-fullwidth",children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{children:(0,a.jsx)("th",{children:"Received via Transfer"})})}),(0,a.jsx)("tbody",{children:n.filter(e=>""!==e).map((e,t)=>(0,a.jsx)("tr",{children:(0,a.jsx)("td",{children:e})},t))}),(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{children:(0,a.jsx)("th",{children:"Sold via Transfer"})})}),(0,a.jsx)("tbody",{children:t.filter(e=>""!==e).map((e,t)=>(0,a.jsx)("tr",{children:(0,a.jsx)("td",{children:e})},t))})]})})(s).then(t=>{console.log("IPTransferred:",t),ea(t),e()}).catch(e=>{console.error("Error:",e),t(e)})}catch(e){console.error("Error:",e),t(e)}}),eb=async()=>{console.log("c",B);let e=await ek(B);if(e){try{let e=await window.ethereum.request({method:"eth_call",params:[{from:A[0],to:v.options.address,data:v.methods.getIP(B).encodeABI()},"latest"]});console.log(e,"ge");let t=await C.eth.abi.decodeParameters(["address","uint96","bool"],e);if(console.log(t[0]),42===t[0].length){eI("This SHA512 is already registered"),S("");return}}catch(e){console.error("Error in getRegisteredIpHandler:",e)}try{let e=await window.ethereum.request({method:"eth_call",params:[{from:A[0],to:f.options.address,data:f.methods.readApprovalFor(u).encodeABI()},"latest"]}),t=C.utils.hexToNumber(e);if("0x"===e||t<l){eI("Approval not sufficient");return}}catch(e){console.error("Allowance error:",e.data.message),eI(e.data.message);return}try{let e=await window.ethereum.request({method:"eth_sendTransaction",params:[{from:A[0],to:v.options.address,data:v.methods.setIP(B).encodeABI()},"latest"]});console.log("receipt:",e),eN("Registration successful!")}catch(e){console.error("setting IPT failed:",e),eI(e.data.message)}}},ef=async()=>{console.log("c",M);let e=await ek(M);if(e)try{let e=await window.ethereum.request({method:"eth_call",params:[{from:A[0],to:v.options.address,data:v.methods.getIP(M).encodeABI()},"latest"]}),t=await C.eth.abi.decodeParameters(["address","uint96","bool"],e);console.log("decoded",t);let n=new Date(1e3*parseInt(t[1])).toString();q(t[0]),O(n),eh()}catch(e){console.error("Error in getRegisteredIpHandler:",e),eI(e.message),q(""),O(""),Z("");return}},ex=async()=>{try{if(42!==ee.length){eI("This is probably not a valid address");return}ey(),eg()}catch(e){console.error("Error in listenForAddressTransferEvents:",e);return}},ev=async()=>{let e=await ek(H);if(e){if(isNaN(G)||G.length<1){eI("Please type a whole number as amount");return}try{let e=await window.ethereum.request({method:"eth_call",params:[{from:A[0],to:v.options.address,data:v.methods.getIP(H).encodeABI()},"latest"]});console.log(e,"ge");let t=await C.eth.abi.decodeParameters(["address","uint96","bool"],e);if(console.log("address",t[0]),t[0].toLowerCase()!==A[0].toLowerCase()){eI("This SHA512 is not registered under your address"),D("");return}}catch(e){console.error("Error in getRegisteredIpHandler:",e)}try{let e=await window.ethereum.request({method:"eth_call",params:[{from:A[0],to:f.options.address,data:f.methods.balanceOf(Y).encodeABI()},"latest"]}),t=C.utils.hexToNumber(e);if(t<1e18*G){eI("The balance of buyer (".concat(t/1e18," IPT) is lower than the requested price: ").concat(G," IPT"));return}}catch(e){eo(e,"Please type a valid address","");return}try{let e=await window.ethereum.request({method:"eth_sendTransaction",params:[{from:A[0],to:v.options.address,data:v.methods.sellerCreatesSalesIntent(H,1e18*G,Y).encodeABI()},"latest"]});eN("Successfully created transfer offer"),console.log("receipt:",e)}catch(e){console.error("offering IP failed:",e),eI(e.data.message)}}},ew=async()=>{let e=await ek(U);if(e){if(isNaN(K)||K.length<1){eI("Please type a whole number as amount");return}try{let e=await window.ethereum.request({method:"eth_call",params:[{from:A[0],to:v.options.address,data:v.methods.getSalesIntent(U).encodeABI()},"latest"]}),t=await C.eth.abi.decodeParameters(["address","uint192","uint64","bool"],e);if(t[0].toLowerCase()!==A[0].toLowerCase()){eI("You are not the buyer");return}if(Number(t[1])!==1e18*Number(K)){console.log("buying price",t[1]),eI("Not the right buying price, should be:",t[1]/1e18);return}if(!t[3]){eI("This is not for sale");return}}catch(e){console.error("Error in getting sales intent:",e.data.message),eI(e.data.message);return}try{let e=await window.ethereum.request({method:"eth_call",params:[{from:A[0],to:f.options.address,data:f.methods.readApprovalFor(u).encodeABI()},"latest"]}),t=C.utils.hexToNumber(e);if("0x"===e)eI("Approval 0 is smaller than the agreed price ".concat(K));else if(t<1e18*K){eI("Approval ".concat(t/1e18," is smaller than the agreed price ").concat(K));return}}catch(e){console.error("Allowance error:",e.data.message),eI(e.data.message);return}try{let e=await window.ethereum.request({method:"eth_call",params:[{from:A[0],to:f.options.address,data:f.methods.balanceOf(A[0]).encodeABI()},"latest"]}),t=C.utils.hexToNumber(e);if(t<1e18*K){eI("The balance of buyer (".concat(t/1e18," IPT) is lower than the requested price: ").concat(K," IPT"));return}}catch(e){eo(e,"Please type a valid address","");return}try{let e=await window.ethereum.request({method:"eth_sendTransaction",params:[{from:A[0],to:v.options.address,data:v.methods.buyerBuysIP(U,1e18*K,!0).encodeABI()},"latest"]});eN("IP successfully transfered!"),console.log("receipt:",e)}catch(e){console.error("buying IPT failed:",e),eI(e.data.message)}}},ej=e=>{navigator.clipboard.writeText(e).then(()=>{console.log("Text copied to clipboard:",e)}).catch(e=>{console.error("Error copying text to clipboard:",e)})},eT=async()=>{try{let e=await C.eth.sendTransaction({from:A[0],to:A[0],value:0,nonce:-1});console.log(e)}catch(e){eI("resend failed",e)}};(0,i.useEffect)(()=>{ei()},[]),(0,i.useEffect)(()=>{console.log("Loading:",P)},[P]),(0,i.useEffect)(()=>{console.log(C)},[C]),(0,i.useEffect)(()=>{ep()},[ep,A]);let eI=e=>{y.Am.error(e,{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},eN=e=>{y.Am.success(e,{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},eP=e=>{let t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth",block:"start"})},ek=async e=>{try{let t=0;console.log("string",e),128!==e.length&&(console.log("length",e.length),eI("This is not a valid sha512. The length should be 128 characters."),t=1);let n=/^[0-9a-fA-F]+$/;if(n.test(e)||(console.log("hex",n.test(e)),eI("This is not a valid sha512. It contains illegal characters."),t=1),1===t)return q(""),O(""),Z(""),!1;return!0}catch(e){console.log(e)}};return(0,a.jsxs)("div",{className:m().main,children:[(0,a.jsxs)(r(),{children:[(0,a.jsx)("title",{children:"IP trade"}),(0,a.jsx)("meta",{name:"description",content:"An IP marketplace app"})]}),(0,a.jsx)(y.Ix,{}),(0,a.jsx)("nav",{className:m().whiteBackground,style:{position:"absolute",zIndex:1,width:"100%",backgroundColor:"rgba(255, 255, 255, 0)"},children:(0,a.jsxs)("div",{className:m().container,style:{display:"flex",alignItems:"center"},children:[(0,a.jsx)("div",{className:"navbar-brand",style:{color:"white"},children:(0,a.jsxs)("div",{className:"content",children:[(0,a.jsx)("h2",{children:"IP trade "}),(0,a.jsx)("h4",{children:"Register your creative content on-chain"})]})}),(0,a.jsx)("div",{className:m().navbarEnd,style:{width:"15%"},children:(0,a.jsx)("button",{onClick:ei,className:"button is-fullwidth",children:"Connect Wallet"})})]})}),(0,a.jsx)("nav",{className:m().whiteBackground,children:(0,a.jsx)("div",{style:{position:"relative",width:"100vw",height:"100vh"},children:(0,a.jsx)(b(),{src:"./images/ipt_coin.jpg",alt:"top_image",fill:!0,style:{objectFit:"cover"}})})}),(0,a.jsx)(e=>{let{onSelect:t}=e,n=e=>{e.preventDefault();let n=e.target.getAttribute("data-id");t(n)};return(0,a.jsxs)("div",{className:m().topbar,children:[(0,a.jsx)("a",{href:"#","data-id":"approve",onClick:n,children:"Approve spending"}),(0,a.jsx)("a",{href:"#","data-id":"register",onClick:n,children:"Register IP"}),(0,a.jsx)("a",{href:"#","data-id":"check",onClick:n,children:"Check IP"}),(0,a.jsx)("a",{href:"#","data-id":"transfer",onClick:n,children:"Transfer IP"})]})},{onSelect:e=>{t(e),eP(e)}}),(0,a.jsx)(e=>{let{faucet:t}=e;return t?(0,a.jsx)("nav",{className:m().whiteBackground,children:(0,a.jsxs)("div",{className:m().container,children:[(0,a.jsx)("div",{className:"navbar-brand",children:(0,a.jsx)("h1",{children:"Your connection to IP trade"})}),(0,a.jsxs)("div",{className:m().navbarEnd,children:[(0,a.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,a.jsx)("div",{style:{marginRight:"10px",width:"15%"},children:(0,a.jsx)("button",{onClick:()=>window.open(j,"_blank"),className:"button is-outlined is-small",children:"View this contract on Etherscan"})})}),(0,a.jsxs)("div",{className:m().container,children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsxs)("p",{style:{marginRight:"10px"},children:["Your address: ",(0,a.jsx)("strong",{children:"".concat(P?" please connect wallet":A[0])})]}),(0,a.jsx)("button",{onClick:()=>ej(P?"Address not loaded":A[0]),className:"button is-outlined is-small",children:"Copy Address"})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsxs)("p",{style:{marginRight:"10px"},children:["IPT address: ",(0,a.jsx)("strong",{children:x})]}),(0,a.jsx)("button",{onClick:()=>ej(P?"Address not loaded":x),className:"button is-outlined is-small",children:"Copy Address"})]}),(0,a.jsxs)("p",{children:["Faucet height: ",String(t)/1e18," IPT every ",$/86400," days "]}),(0,a.jsxs)("p",{children:["IP Registration : ",String(l)/1e18," IPT"]}),(0,a.jsxs)("p",{children:["IP Transfer : ",String(c)/1e18," IPT"]})]}),(0,a.jsx)("div",{className:m().navbarEnd,style:{width:"15%"},children:(0,a.jsx)("button",{onClick:eu,className:"button is-outlined is-fullwidth ".concat(P?"is-loading":" "),children:"get IPT here"})})]})]})}):(0,a.jsx)("nav",{className:m().whiteBackground,children:(0,a.jsx)("div",{children:"Please wait for faucet to connect..."})})},{faucet:n}),(0,a.jsxs)("div",{id:"approve",children:["approve"===e&&(0,a.jsxs)("nav",{className:m().whiteBackground,children:[(0,a.jsx)("div",{className:m().container,children:(0,a.jsx)("div",{className:"navbar-brand",children:(0,a.jsx)("div",{className:"content",children:(0,a.jsx)("h1",{children:"Set allowance"})})})}),(0,a.jsx)("div",{children:(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:m().container,children:[(0,a.jsx)("div",{className:"has-text-left",style:{margin:"15px",width:"40%"},children:(0,a.jsxs)("div",{className:"content",children:[(0,a.jsx)("p",{children:"The contract needs your approval to spend IPT on your behalf."}),(0,a.jsx)("p",{children:"Please make sure to approve at least the amount that you need for the desired transaction. Every transaction reduces the allowance until it reaches 0."})]})}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsxs)("p",{className:"has-text-left",style:{margin:"10px",width:"50%"},children:["The address of this contract is ",w]}),(0,a.jsx)("button",{onClick:()=>ej(w),className:"button is-outlined is-small",children:"Copy Address"})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsxs)("div",{style:{width:"50%"},children:[(0,a.jsx)("label",{htmlFor:"approveAddress",children:"Address to approve:"}),(0,a.jsx)("input",{className:"input",type:"text",id:"approveAddress",value:u,onChange:e=>h(e.target.value)})]}),(0,a.jsx)("div",{className:m().navbarEnd,style:{width:"15%"},children:(0,a.jsx)("button",{onClick:ed,className:"button is-outlined is-fullwidth ".concat(P?"is-loading":""),children:"check allowance"})})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsxs)("div",{style:{width:"50%"},children:[(0,a.jsx)("label",{htmlFor:"approveAmount",children:"Amount to approve:"}),(0,a.jsx)("input",{className:"input",type:"text",id:"approveAmount",value:g,onChange:e=>T(e.target.value)})]}),(0,a.jsx)("div",{className:m().navbarEnd,style:{width:"15%"},children:(0,a.jsx)("button",{onClick:el,className:"button is-outlined is-fullwidth ".concat(P?"is-loading":""),children:"set allowance"})})]})]})})})]}),"approve"===e&&(0,a.jsx)("nav",{className:m().whiteBackground,children:(0,a.jsx)("div",{className:m().container,children:(0,a.jsxs)("div",{children:["Allowance for address ",u,": ",String(I)/1e18," IPT"]})})}),"approve"===e&&(0,a.jsx)("nav",{className:m().whiteBackground,children:(0,a.jsx)("div",{className:m().container,children:(0,a.jsx)("div",{className:m().navbarEnd,style:{width:"15%"},children:(0,a.jsx)("button",{onClick:ec,className:"button is-outlined is-fullwidth ".concat(P?"is-loading":""),children:"revoke allowance"})})})})]}),(0,a.jsx)("div",{id:"register",children:"register"===e&&(0,a.jsxs)("nav",{className:m().whiteBackground,children:[(0,a.jsx)("div",{className:m().container,children:(0,a.jsx)("div",{className:"navbar-brand",children:(0,a.jsx)("h1",{children:"Register content"})})}),(0,a.jsxs)("div",{className:m().container,style:{display:"flex",alignItems:"center"},children:[(0,a.jsxs)("div",{style:{width:"50%"},children:[(0,a.jsx)("label",{htmlFor:"registersha512",children:"sha512"}),(0,a.jsx)("input",{className:"input",type:"text",id:"registersha512",value:B,onChange:e=>S(e.target.value)})]}),(0,a.jsx)("div",{className:m().navbarEnd,style:{width:"15%"},children:(0,a.jsx)("button",{onClick:eb,className:"button is-outlined is-fullwidth ".concat(P?"is-loading":""),children:"register IP"})})]})]})}),(0,a.jsxs)("div",{id:"check",children:["check"===e&&(0,a.jsxs)("nav",{className:m().whiteBackground,children:[(0,a.jsx)("div",{className:m().container,children:(0,a.jsx)("div",{className:"navbar-brand",children:(0,a.jsx)("h1",{children:"Check registered content"})})}),(0,a.jsxs)("div",{className:m().container,style:{display:"flex",alignItems:"center"},children:[(0,a.jsxs)("div",{style:{width:"50%"},children:[(0,a.jsx)("label",{htmlFor:"checksha512",children:"sha512"}),(0,a.jsx)("input",{className:"input",type:"text",id:"checksha512",value:M,onChange:e=>F(e.target.value)})]}),(0,a.jsx)("div",{className:m().navbarEnd,style:{width:"15%"},children:(0,a.jsx)("button",{onClick:ef,className:"button is-outlined is-fullwidth ".concat(P?"is-loading":""),children:"check registration"})})]}),(0,a.jsxs)("div",{className:m().container,children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Current owner"}),": ",R]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"First registered at"}),": ",L]}),"\n",X]})]}),"check"===e&&(0,a.jsxs)("nav",{className:m().whiteBackground,children:[(0,a.jsx)("div",{className:m().container,children:(0,a.jsx)("div",{className:"navbar-brand",children:(0,a.jsx)("h1",{children:"sha512 registrations and transfers per address"})})}),(0,a.jsxs)("div",{className:m().container,style:{display:"flex",alignItems:"center"},children:[(0,a.jsxs)("div",{style:{width:"50%"},children:[(0,a.jsx)("label",{htmlFor:"IPOnAddress",children:"Address"}),(0,a.jsx)("input",{className:"input",type:"text",id:"IPOnAddress",value:ee,onChange:e=>et(e.target.value)})]}),(0,a.jsx)("div",{className:m().navbarEnd,style:{width:"15%"},children:(0,a.jsx)("button",{onClick:ex,className:"button is-outlined is-fullwidth ".concat(P?"is-loading":""),children:"check address"})})]}),(0,a.jsxs)("div",{className:m().container,children:[es,en]})]})]}),(0,a.jsxs)("div",{id:"transfer",children:["transfer"===e&&(0,a.jsxs)("nav",{className:m().whiteBackground,children:[(0,a.jsx)("div",{className:m().container,children:(0,a.jsx)("div",{className:"navbar-brand",children:(0,a.jsx)("h1",{children:"Offer content to another address"})})}),(0,a.jsxs)("div",{className:m().container,children:[(0,a.jsxs)("div",{style:{width:"50%"},children:[(0,a.jsx)("label",{htmlFor:"offerIpsha512",children:"sha512"}),(0,a.jsx)("input",{className:"input",type:"text",id:"offerIpsha512",value:H,onChange:e=>D(e.target.value)})]}),(0,a.jsxs)("div",{style:{width:"50%"},children:[(0,a.jsx)("label",{htmlFor:"offerIpAddress",children:"Address"}),(0,a.jsx)("input",{className:"input",type:"text",id:"offerIpAddress",value:Y,onChange:e=>z(e.target.value)})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsxs)("div",{style:{width:"50%"},children:[(0,a.jsx)("label",{htmlFor:"offerIpPrice",children:"Price in IPT"}),(0,a.jsx)("input",{className:"input",type:"text",id:"offerIpPrice",value:G,onChange:e=>W(e.target.value)})]}),(0,a.jsx)("div",{className:m().navbarEnd,style:{width:"15%"},children:(0,a.jsx)("button",{onClick:ev,className:"button is-outlined is-fullwidth ".concat(P?"is-loading":""),children:"offer IP"})})]})]})]}),"transfer"===e&&(0,a.jsxs)("nav",{className:m().whiteBackground,children:[(0,a.jsx)("div",{className:m().container,children:(0,a.jsx)("div",{className:"navbar-brand",children:(0,a.jsx)("h1",{children:"Accept offer"})})}),(0,a.jsxs)("div",{className:m().container,children:[(0,a.jsxs)("div",{style:{width:"50%"},children:[(0,a.jsx)("label",{htmlFor:"buyIpsha512",children:"sha512"}),(0,a.jsx)("input",{className:"input",type:"text",id:"buyIpsha512",value:U,onChange:e=>V(e.target.value)})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsxs)("div",{style:{width:"50%"},children:[(0,a.jsx)("label",{htmlFor:"buyIpPrice",children:"Price in IPT"}),(0,a.jsx)("input",{className:"input",type:"text",id:"buyIpPrice",value:K,onChange:e=>Q(e.target.value)})]}),(0,a.jsx)("div",{className:m().navbarEnd,style:{width:"15%"},children:(0,a.jsx)("button",{onClick:ew,className:"button is-outlined is-fullwidth ".concat(P?"is-loading":""),children:"Accept IP"})})]})]})]})]}),(0,a.jsx)("div",{id:"resend",children:"resend"===e&&(0,a.jsx)("button",{onClick:eT,className:"button is-outlined is-fullwidth",children:"resend"})}),(0,a.jsx)(()=>(0,a.jsx)("nav",{className:m().whiteBackground,children:(0,a.jsxs)("div",{className:m().footer,children:[(0,a.jsx)("p",{children:"\xa9 2024 SquaredAnt GmbH. All rights reserved."}),(0,a.jsxs)("p",{children:["Read the project guide on ",(0,a.jsx)("a",{href:"https://github.com/mmrmas/mmrmas.github.io",children:"Github"})]})]})}),{})]})}},1455:function(e){e.exports={main:"ipt_main__L_YTG",whiteBackground:"ipt_whiteBackground__6aOUa",input:"ipt_input__4g_fY",help:"ipt_help__X1lop","navbar-brand":"ipt_navbar-brand__Su_u5",navbarEnd:"ipt_navbarEnd__p68ET",container:"ipt_container__I6D_A",dropdowncontainer:"ipt_dropdowncontainer__HOY3z",dropdowncontent:"ipt_dropdowncontent__tmwLd",visible:"ipt_visible__zKzyx",topbar:"ipt_topbar__7PuA0",content:"ipt_content__W7QdB",footer:"ipt_footer__nHNLp",app:"ipt_app___LATL"}}},function(e){e.O(0,[638,94,971,472,744],function(){return e(e.s=377)}),_N_E=e.O()}]);